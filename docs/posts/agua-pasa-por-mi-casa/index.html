<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="David Humberto Jiménez S.">
<meta name="dcterms.date" content="2024-02-03">
<meta name="description" content="Análisis de Solicitudes de Información Pública (SIP) relacionadas al tema de agua potable en la Ciudad de México">

<title>blog - ¿Agua pasa por mi casa?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="../../site_libs/plotly-binding-4.10.3/plotly.js"></script>
<script src="../../site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="../../site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/dhumbertojs" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/dhumbertoj" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">¿Agua pasa por mi casa?</h1>
                  <div>
        <div class="description">
          Análisis de Solicitudes de Información Pública (SIP) relacionadas al tema de agua potable en la Ciudad de México
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">code</div>
                <div class="quarto-category">text-analysis</div>
                <div class="quarto-category">visualization</div>
                <div class="quarto-category">spanish</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>David Humberto Jiménez S. </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 3, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<blockquote class="blockquote">
<p>“Un mago nunca llega tarde, Frodo Bolsón. Ni pronto. Llega exactamente cuando se lo propone.” Gandalf</p>
</blockquote>
<p>¡Bienvenidxs! Sé que he tenido abandonado este proyecto durante algún tiempo. Pero, la verdad sea dicha, he tenido mucho trabajo.</p>
<p>Este es el primer post de la nueva iteración del blog (la tercera) y ahora está montado sobre <a href="https://quarto.org/docs/guide/">Quarto</a>. ¿Que qué es <em>quarto</em>? Quarto es un sistema de código abierto (Open source) para la publicación técnica/científica. Esto quiere decir que un montón de personas brillantes estaban hartas de lidiar con varias herramientas al mismo tiempo para trabajar y poder publicar sus artículos, páginas, libros y blogs. La principal ventaja, para mí, es que puedes trabajar con python, R, Julia y Observable JS; dentro del mismo documento. Aunque nunca he utilizado Julia.</p>
<p>Además, los documentos utilizan la misma estructura que un markdown lo que nos facilita la vida, ya que no hay que aprender sintaxis nueva. En fin, tal vez es la emoción hablando, así que vayan, revísenlo y si les convence úsenlo. Toda la información <a href="https://quarto.org/">aquí</a>.</p>
<section id="el-reporte" class="level1">
<h1>El reporte</h1>
<p>Durante 2023 hice muchas cosas, principalmente trabajar, pero en uno de esos bellos momentos donde los astros se alinean y puedes trabajar en algo interesante con libertad, participé junto con otras compañeras del equipo en el reporte especial <a href="https://infocdmx.org.mx/images/biblioteca/2023/Reporte_Especial_de_Apertura_1_%202023_Agua_%20pasa_por_mi_casa_La_transparencia_de_la_gestion_del_agua_en_la_CDMX.pdf">“¿Agua pasa por mi casa?</a> La transparencia de la gestión del agua en la CDMX.</p>
<p>Se trata de un informe sobre &gt; “las actividades relacionadas con el abastecimiento, cobro, cesión de derechos, saneamiento, desarrollo de infraestructura, mantenimiento de las fuentes de agua, así como todo lo relacionado para tener un empleo adecuado del recurso”.</p>
<p>En este hice un análisis de la distribución de las Solicitudes de Información Pública a lo largo del tiempo, como en el caso del metro que pueden consultar <a href="https://dhumbertojs.github.io/posts/linea-12/">aquí</a>.</p>
<p>Para este reporte se revisaron las Solicitudes de Información Pública (SIP) recibidas por todos los sujetos obligados del 2006 al 2022, esto equivale a un total de 1,610,228 solicitudes. Se seleccionaron 40,269 solicitudes y se decidió utilizar un conjunto de palabras clave que deben aparecer al menos una vez dentro del cuerpo de la solicitud. Usando “expresiones regulares” (regex) se detectaron palabras completas, o que empiecen y terminen con una determinada combinación de letras, además de que no importa si están escritas en mayúsculas o minúsculas.</p>
<section id="selección-de-sip" class="level2">
<h2 class="anchored" data-anchor-id="selección-de-sip">Selección de SIP</h2>
<p>Se emplearon las siguientes palabras: “agua” (exacta); que empezará con “Hidri” o “hidrí” (por ejemplo, hídrico); “sequía” o “sequía”; “inundaciones”, “pozos” o “posos”; la combinación de las palabras “captador” y “lluvia” o “pluvial”; así como la combinación de “saneamiento”, “fuga”, “corte” y todas las anteriores. Al tratarse de una selección automatizada, existe la posibilidad de encontrar resoluciones o solicitudes que no pertenezcan a la temática planteada y contengan una o varias de las palabras listadas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'httr' was built under R version 4.2.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'purrr' was built under R version 4.2.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidyr' was built under R version 4.2.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'stringr' was built under R version 4.2.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'janitor' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'janitor'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    chisq.test, fisher.test</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(writexl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'writexl' was built under R version 4.2.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidytext' was built under R version 4.2.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'lubridate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    date, intersect, setdiff, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Datos -------------------------------------------------------------------</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://datosabiertos.infocdmx.org.mx/dataset/6dda3a6f-4e2a-484c-9613-89899058f70d/resource/9c683caf-f559-462c-8e70-845c8902d7b4/download/_limpia_2022.xlsx"</span>,</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://datosabiertos.infocdmx.org.mx/dataset/2e770767-dfe5-4ba2-9af3-61338cc6509b/resource/43f4549c-9cba-4737-b86b-f2ee4924ddf8/download/limpia_2021.xlsx"</span>,</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://datosabiertos.infocdmx.org.mx/dataset/f8a7fab6-8466-4e1c-b3fb-b0d29afd2f83/resource/2a29d720-32bc-4268-90da-3b374aaa4379/download/limpia_2020.xlsx"</span>,</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://datosabiertos.infocdmx.org.mx/dataset/f92cb601-9b13-4e58-9556-9810c5347e2b/resource/d7019dab-918c-41e9-ad6d-9fb9838c5021/download/limpia_2019.xlsx"</span>,</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://datosabiertos.infocdmx.org.mx/dataset/29faea7e-4d34-4f5d-bdd4-50b61ace1f32/resource/074b6c4e-89fd-4119-a43a-69b1e007e1b3/download/limpia_2018.xlsx"</span>,</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://datosabiertos.infocdmx.org.mx/dataset/e42ccdad-f383-485b-802f-9aba520df083/resource/e8b2d6d6-c4cf-4a49-ac2b-512ab3597283/download/limpia_2017.xlsx"</span>,</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://datosabiertos.infocdmx.org.mx/dataset/017c49f8-39f7-4942-9408-728046586bc8/resource/5c68a7a5-be2d-4a4f-ad04-ff04a9ed2889/download/limpia_2016.xlsx"</span>,</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://datosabiertos.infocdmx.org.mx/dataset/bdadb1ab-e476-4c47-95fb-4a2d4af9e2de/resource/540d06f9-b9a2-4f56-b23d-1e84e2ed85a2/download/limpia_2015.xlsx"</span>,</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://datosabiertos.infocdmx.org.mx/dataset/e905654e-6a6a-4d0d-912f-17b5270aabf2/resource/d68925b2-fcd3-4676-b2c5-d73c3ac69d9a/download/limpia_2014.xlsx"</span>,</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://datosabiertos.infocdmx.org.mx/dataset/69b31de6-3a7b-4892-ac2e-79c7043616b4/resource/52c81f47-214b-4888-9869-0b17b781ebb9/download/limpia_2013.xlsx"</span>,</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://datosabiertos.infocdmx.org.mx/dataset/850fb128-2643-40b5-bbb4-f7a378494f90/resource/2bef2739-b570-4c80-afb2-e8ccb59e8f2c/download/limpia_2012.xlsx"</span>,</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://datosabiertos.infocdmx.org.mx/dataset/f4842322-3068-475f-b8c0-9a65b0a011e6/resource/de055dd6-2eb2-4d75-adb9-2041b47fdb4e/download/limpia_2011.xlsx"</span>,</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://datosabiertos.infocdmx.org.mx/dataset/7bdd86c0-93b9-4dd6-be66-a39ec814be1c/resource/5043bd4d-07bf-40db-a9df-8f2755aa36bc/download/limpia_2010.xlsx"</span>,</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://datosabiertos.infocdmx.org.mx/dataset/4ef8d70d-21c9-427b-95c2-8c006f4fec16/resource/132a3785-c718-4122-96df-031437d2f289/download/limpia_2009.xlsx"</span>,</span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://datosabiertos.infocdmx.org.mx/dataset/1422cec6-f8e9-4715-bc49-ea66afff640a/resource/a27a3b30-b727-4650-896d-1258729e13ba/download/limpia_2008.xlsx"</span>,</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://datosabiertos.infocdmx.org.mx/dataset/bad94346-71e9-438d-b026-689d228e2d33/resource/2eb8f23e-a098-4746-80ce-e52562bd1f11/download/limpia_2007.xlsx"</span>,</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://datosabiertos.infocdmx.org.mx/dataset/17b24af2-4950-4476-91a1-d934fd4d7c68/resource/e0d70ebb-7c16-46c7-8865-c537df8ff637/download/limpia_2006.xlsx"</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>temp_files <span class="ot">&lt;-</span> <span class="fu">map</span>(url, <span class="sc">~</span> {</span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>    temp_file <span class="ot">&lt;-</span> <span class="fu">tempfile</span>()</span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">GET</span>(.x, <span class="fu">write_disk</span>(temp_file))</span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>    temp_file</span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a>lista <span class="ot">&lt;-</span> <span class="fu">map</span>(temp_files, <span class="sc">~</span> {</span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">read_excel</span>(.x) <span class="sc">%&gt;%</span></span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a>        <span class="fu">clean_names</span>() <span class="sc">%&gt;%</span></span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate_all</span>(as.character)</span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a>lista <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(lista)</span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(temp_files, unlink)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 0

[[2]]
[1] 0

[[3]]
[1] 0

[[4]]
[1] 0

[[5]]
[1] 0

[[6]]
[1] 0

[[7]]
[1] 0

[[8]]
[1] 0

[[9]]
[1] 0

[[10]]
[1] 0

[[11]]
[1] 0

[[12]]
[1] 0

[[13]]
[1] 0

[[14]]
[1] 0

[[15]]
[1] 0

[[16]]
[1] 0

[[17]]
[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtro ------------------------------------------------------------------</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>filtro <span class="ot">&lt;-</span> lista <span class="sc">%&gt;%</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">awa =</span> <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>            descripcion_solicitud,</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">regex</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">bagua</span><span class="sc">\\</span><span class="st">b"</span>, <span class="at">ignore_case =</span> T)</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>        ), <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">fug =</span> <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>            descripcion_solicitud,</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>            <span class="fu">regex</span>(<span class="st">"fuga"</span>, <span class="at">ignore_case =</span> T)</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>        ), <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">corte =</span> <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>            descripcion_solicitud,</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>            <span class="fu">regex</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">bcorte|</span><span class="sc">\\</span><span class="st">bcorta"</span>, <span class="at">ignore_case =</span> T)</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>        ), <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">esc =</span> <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>            descripcion_solicitud,</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>            <span class="fu">regex</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">besca"</span>, <span class="at">ignore_case =</span> T)</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>        ), <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">h =</span> <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(</span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>            descripcion_solicitud,</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>            <span class="fu">regex</span>(<span class="st">"hidrí|hidri"</span>, <span class="at">ignore_case =</span> T)</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>        ), <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">f1 =</span> <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(</span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a>            descripcion_solicitud,</span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a>            <span class="fu">regex</span>(<span class="st">"sequía|sequia"</span>, <span class="at">ignore_case =</span> T)</span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a>        ), <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">f2 =</span> <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(</span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a>            descripcion_solicitud,</span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a>            <span class="fu">regex</span>(<span class="st">"inundaciones"</span>, <span class="at">ignore_case =</span> T)</span>
<span id="cb26-32"><a href="#cb26-32" aria-hidden="true" tabindex="-1"></a>        ), <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb26-33"><a href="#cb26-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">f3 =</span> <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(</span>
<span id="cb26-34"><a href="#cb26-34" aria-hidden="true" tabindex="-1"></a>            descripcion_solicitud,</span>
<span id="cb26-35"><a href="#cb26-35" aria-hidden="true" tabindex="-1"></a>            <span class="fu">regex</span>(<span class="st">"saneamiento"</span>, <span class="at">ignore_case =</span> T)</span>
<span id="cb26-36"><a href="#cb26-36" aria-hidden="true" tabindex="-1"></a>        ), <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb26-37"><a href="#cb26-37" aria-hidden="true" tabindex="-1"></a>        <span class="at">f4 =</span> <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(</span>
<span id="cb26-38"><a href="#cb26-38" aria-hidden="true" tabindex="-1"></a>            descripcion_solicitud,</span>
<span id="cb26-39"><a href="#cb26-39" aria-hidden="true" tabindex="-1"></a>            <span class="fu">regex</span>(<span class="st">"pozos|posos"</span>, <span class="at">ignore_case =</span> T)</span>
<span id="cb26-40"><a href="#cb26-40" aria-hidden="true" tabindex="-1"></a>        ), <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb26-41"><a href="#cb26-41" aria-hidden="true" tabindex="-1"></a>        <span class="at">f5 =</span> <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(</span>
<span id="cb26-42"><a href="#cb26-42" aria-hidden="true" tabindex="-1"></a>            descripcion_solicitud,</span>
<span id="cb26-43"><a href="#cb26-43" aria-hidden="true" tabindex="-1"></a>            <span class="fu">regex</span>(<span class="st">"captador"</span>, <span class="at">ignore_case =</span> T)</span>
<span id="cb26-44"><a href="#cb26-44" aria-hidden="true" tabindex="-1"></a>        ), <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb26-45"><a href="#cb26-45" aria-hidden="true" tabindex="-1"></a>        <span class="at">f6 =</span> <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(</span>
<span id="cb26-46"><a href="#cb26-46" aria-hidden="true" tabindex="-1"></a>            descripcion_solicitud,</span>
<span id="cb26-47"><a href="#cb26-47" aria-hidden="true" tabindex="-1"></a>            <span class="fu">regex</span>(<span class="st">"humedal"</span>, <span class="at">ignore_case =</span> T)</span>
<span id="cb26-48"><a href="#cb26-48" aria-hidden="true" tabindex="-1"></a>        ), <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb26-49"><a href="#cb26-49" aria-hidden="true" tabindex="-1"></a>        <span class="at">f7 =</span> <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(</span>
<span id="cb26-50"><a href="#cb26-50" aria-hidden="true" tabindex="-1"></a>            descripcion_solicitud,</span>
<span id="cb26-51"><a href="#cb26-51" aria-hidden="true" tabindex="-1"></a>            <span class="fu">regex</span>(<span class="st">"pluvial|lluvia"</span>, <span class="at">ignore_case =</span> T)</span>
<span id="cb26-52"><a href="#cb26-52" aria-hidden="true" tabindex="-1"></a>        ), <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb26-53"><a href="#cb26-53" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb26-54"><a href="#cb26-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">f7 =</span> <span class="fu">ifelse</span>(f5 <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> f7 <span class="sc">==</span> <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb26-55"><a href="#cb26-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb26-56"><a href="#cb26-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb26-57"><a href="#cb26-57" aria-hidden="true" tabindex="-1"></a>        <span class="at">f3 =</span> <span class="fu">ifelse</span>(f3 <span class="sc">==</span> <span class="dv">1</span>, <span class="fu">sum</span>(awa, fug, corte, esc, h, f1, f2, f3, f4, f5, f6, f7), <span class="dv">0</span>)</span>
<span id="cb26-58"><a href="#cb26-58" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb26-59"><a href="#cb26-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-60"><a href="#cb26-60" aria-hidden="true" tabindex="-1"></a>ver <span class="ot">&lt;-</span> filtro <span class="sc">%&gt;%</span></span>
<span id="cb26-61"><a href="#cb26-61" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(awa <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> h <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> f1 <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> f2 <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> f3 <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">|</span> f4 <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> f7 <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb26-62"><a href="#cb26-62" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb26-63"><a href="#cb26-63" aria-hidden="true" tabindex="-1"></a>        <span class="at">organo_de_gobierno =</span> <span class="fu">case_when</span>(</span>
<span id="cb26-64"><a href="#cb26-64" aria-hidden="true" tabindex="-1"></a>            <span class="fu">str_detect</span>(dependencia, <span class="st">"Alcal"</span>) <span class="sc">~</span> <span class="st">"Alcaldías"</span>,</span>
<span id="cb26-65"><a href="#cb26-65" aria-hidden="true" tabindex="-1"></a>            <span class="fu">str_detect</span>(dependencia, <span class="st">"Dele"</span>) <span class="sc">~</span> <span class="st">"Alcaldías"</span>,</span>
<span id="cb26-66"><a href="#cb26-66" aria-hidden="true" tabindex="-1"></a>            <span class="fu">str_detect</span>(dependencia, <span class="st">"Agua"</span>) <span class="sc">~</span> <span class="st">"Organismos desconcentrados, descentralizados, paraestatales y auxiliares"</span>,</span>
<span id="cb26-67"><a href="#cb26-67" aria-hidden="true" tabindex="-1"></a>            <span class="fu">str_detect</span>(dependencia, <span class="st">"Ambiental y"</span>) <span class="sc">~</span> <span class="st">"Organismos desconcentrados, descentralizados, paraestatales y auxiliares"</span>,</span>
<span id="cb26-68"><a href="#cb26-68" aria-hidden="true" tabindex="-1"></a>            <span class="fu">str_detect</span>(dependencia, <span class="st">"Medio A"</span>) <span class="sc">~</span> <span class="st">"Administración Pública Central"</span>,</span>
<span id="cb26-69"><a href="#cb26-69" aria-hidden="true" tabindex="-1"></a>            <span class="fu">str_detect</span>(dependencia, <span class="st">"Obras"</span>) <span class="sc">~</span> <span class="st">"Administración Pública Central"</span>,</span>
<span id="cb26-70"><a href="#cb26-70" aria-hidden="true" tabindex="-1"></a>            <span class="fu">str_detect</span>(dependencia, <span class="st">"Protección Civil"</span>) <span class="sc">~</span> <span class="st">"Administración Pública Central"</span>,</span>
<span id="cb26-71"><a href="#cb26-71" aria-hidden="true" tabindex="-1"></a>            <span class="fu">str_detect</span>(dependencia, <span class="st">"Planeación"</span>) <span class="sc">~</span> <span class="st">"Organismos desconcentrados, descentralizados, paraestatales y auxiliares"</span>,</span>
<span id="cb26-72"><a href="#cb26-72" aria-hidden="true" tabindex="-1"></a>            <span class="fu">str_detect</span>(dependencia, <span class="st">"Jefatura"</span>) <span class="sc">~</span> <span class="st">"Administración Pública Central"</span>,</span>
<span id="cb26-73"><a href="#cb26-73" aria-hidden="true" tabindex="-1"></a>            <span class="fu">str_detect</span>(dependencia, <span class="st">"Secretaría de Desarrollo Urbano y Vivienda"</span>) <span class="sc">~</span> <span class="st">"Administración Pública Central"</span>,</span>
<span id="cb26-74"><a href="#cb26-74" aria-hidden="true" tabindex="-1"></a>            T <span class="sc">~</span> organo_de_gobierno</span>
<span id="cb26-75"><a href="#cb26-75" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb26-76"><a href="#cb26-76" aria-hidden="true" tabindex="-1"></a>        <span class="at">organo_de_gobierno =</span> <span class="fu">str_replace_all</span>(</span>
<span id="cb26-77"><a href="#cb26-77" aria-hidden="true" tabindex="-1"></a>            organo_de_gobierno, <span class="st">"Administración Pública Centralizada"</span>,</span>
<span id="cb26-78"><a href="#cb26-78" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Administración Pública Central"</span></span>
<span id="cb26-79"><a href="#cb26-79" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb26-80"><a href="#cb26-80" aria-hidden="true" tabindex="-1"></a>        <span class="at">organo_de_gobierno =</span> <span class="fu">str_remove_all</span>(organo_de_gobierno, <span class="st">"</span><span class="sc">\\</span><span class="st">(baja 10-06-2019</span><span class="sc">\\</span><span class="st">)"</span>),</span>
<span id="cb26-81"><a href="#cb26-81" aria-hidden="true" tabindex="-1"></a>        <span class="at">organo_de_gobierno =</span> <span class="fu">str_trim</span>(organo_de_gobierno, <span class="st">"both"</span>),</span>
<span id="cb26-82"><a href="#cb26-82" aria-hidden="true" tabindex="-1"></a>        <span class="at">organo_de_gobierno =</span> <span class="fu">str_replace_all</span>(</span>
<span id="cb26-83"><a href="#cb26-83" aria-hidden="true" tabindex="-1"></a>            organo_de_gobierno, <span class="st">"Instituto para la Atención de los Adultos Mayores en el Distrito Federal </span><span class="sc">\\</span><span class="st">(17/02/2010</span><span class="sc">\\</span><span class="st">)"</span>,</span>
<span id="cb26-84"><a href="#cb26-84" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Organismos desconcentrados, descentralizados, paraestatales y auxiliares"</span></span>
<span id="cb26-85"><a href="#cb26-85" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb26-86"><a href="#cb26-86" aria-hidden="true" tabindex="-1"></a>        <span class="at">organo_de_gobierno =</span> <span class="fu">str_replace_all</span>(</span>
<span id="cb26-87"><a href="#cb26-87" aria-hidden="true" tabindex="-1"></a>            organo_de_gobierno, <span class="st">"Desconcentrados, Descentralizados, Paraestatales y Auxiliares"</span>,</span>
<span id="cb26-88"><a href="#cb26-88" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Organismos desconcentrados, descentralizados, paraestatales y auxiliares"</span></span>
<span id="cb26-89"><a href="#cb26-89" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb26-90"><a href="#cb26-90" aria-hidden="true" tabindex="-1"></a>        <span class="at">organo_de_gobierno =</span> <span class="fu">str_replace_all</span>(</span>
<span id="cb26-91"><a href="#cb26-91" aria-hidden="true" tabindex="-1"></a>            organo_de_gobierno, <span class="st">"Descentralizados"</span>,</span>
<span id="cb26-92"><a href="#cb26-92" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Organismos desconcentrados, descentralizados, paraestatales y auxiliares"</span></span>
<span id="cb26-93"><a href="#cb26-93" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb26-94"><a href="#cb26-94" aria-hidden="true" tabindex="-1"></a>        <span class="at">organo_de_gobierno =</span> <span class="fu">str_replace_all</span>(</span>
<span id="cb26-95"><a href="#cb26-95" aria-hidden="true" tabindex="-1"></a>            organo_de_gobierno, <span class="st">"Fondos y fideicomisos públicos"</span>,</span>
<span id="cb26-96"><a href="#cb26-96" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Fideicomisos y fondos públicos"</span></span>
<span id="cb26-97"><a href="#cb26-97" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb26-98"><a href="#cb26-98" aria-hidden="true" tabindex="-1"></a>        <span class="at">organo_de_gobierno =</span> <span class="fu">str_replace_all</span>(</span>
<span id="cb26-99"><a href="#cb26-99" aria-hidden="true" tabindex="-1"></a>            organo_de_gobierno, <span class="st">"Organismos Autónomos"</span>,</span>
<span id="cb26-100"><a href="#cb26-100" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Órganos Autónomos"</span></span>
<span id="cb26-101"><a href="#cb26-101" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb26-102"><a href="#cb26-102" aria-hidden="true" tabindex="-1"></a>        <span class="at">organo_de_gobierno =</span> <span class="fu">str_replace_all</span>(</span>
<span id="cb26-103"><a href="#cb26-103" aria-hidden="true" tabindex="-1"></a>            organo_de_gobierno, <span class="st">"Órgano Autónomo"</span>,</span>
<span id="cb26-104"><a href="#cb26-104" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Órganos Autónomos"</span></span>
<span id="cb26-105"><a href="#cb26-105" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb26-106"><a href="#cb26-106" aria-hidden="true" tabindex="-1"></a>        <span class="at">organo_de_gobierno =</span> <span class="fu">str_replace_all</span>(</span>
<span id="cb26-107"><a href="#cb26-107" aria-hidden="true" tabindex="-1"></a>            organo_de_gobierno, <span class="st">"Órgano Autónomo"</span>,</span>
<span id="cb26-108"><a href="#cb26-108" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Órganos Autónomos"</span></span>
<span id="cb26-109"><a href="#cb26-109" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb26-110"><a href="#cb26-110" aria-hidden="true" tabindex="-1"></a>        <span class="at">organo_de_gobierno =</span> <span class="fu">str_replace_all</span>(</span>
<span id="cb26-111"><a href="#cb26-111" aria-hidden="true" tabindex="-1"></a>            organo_de_gobierno, <span class="st">"Tribunales Administrativos"</span>,</span>
<span id="cb26-112"><a href="#cb26-112" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Órganos Autónomos"</span></span>
<span id="cb26-113"><a href="#cb26-113" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb26-114"><a href="#cb26-114" aria-hidden="true" tabindex="-1"></a>        <span class="at">organo_de_gobierno =</span> <span class="fu">str_replace_all</span>(</span>
<span id="cb26-115"><a href="#cb26-115" aria-hidden="true" tabindex="-1"></a>            organo_de_gobierno, <span class="st">"Órgano político administrativos"</span>,</span>
<span id="cb26-116"><a href="#cb26-116" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Organismos desconcentrados, descentralizados, paraestatales y auxiliares"</span></span>
<span id="cb26-117"><a href="#cb26-117" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb26-118"><a href="#cb26-118" aria-hidden="true" tabindex="-1"></a>        <span class="at">organo_de_gobierno =</span> <span class="fu">str_replace_all</span>(</span>
<span id="cb26-119"><a href="#cb26-119" aria-hidden="true" tabindex="-1"></a>            organo_de_gobierno, <span class="st">"</span><span class="sc">\\</span><span class="st">bÓrgano</span><span class="sc">\\</span><span class="st">b"</span>,</span>
<span id="cb26-120"><a href="#cb26-120" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Poder"</span></span>
<span id="cb26-121"><a href="#cb26-121" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb26-122"><a href="#cb26-122" aria-hidden="true" tabindex="-1"></a>        <span class="at">organo_de_gobierno =</span> <span class="fu">str_remove_all</span>(organo_de_gobierno, <span class="st">"en el Distrito Federal"</span>),</span>
<span id="cb26-123"><a href="#cb26-123" aria-hidden="true" tabindex="-1"></a>        <span class="at">organo_de_gobierno =</span> <span class="fu">str_trim</span>(organo_de_gobierno, <span class="st">"both"</span>),</span>
<span id="cb26-124"><a href="#cb26-124" aria-hidden="true" tabindex="-1"></a>        <span class="at">organo_de_gobierno =</span> <span class="fu">str_replace_all</span>(</span>
<span id="cb26-125"><a href="#cb26-125" aria-hidden="true" tabindex="-1"></a>            organo_de_gobierno, <span class="st">"Entidades Paramunicipales"</span>,</span>
<span id="cb26-126"><a href="#cb26-126" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Organismos desconcentrados, descentralizados, paraestatales y auxiliares"</span></span>
<span id="cb26-127"><a href="#cb26-127" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb26-128"><a href="#cb26-128" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb26-129"><a href="#cb26-129" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(organo_de_gobierno <span class="sc">!=</span> <span class="st">"Sindicatos"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb26-130"><a href="#cb26-130" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="dv">18</span><span class="sc">:</span><span class="dv">29</span>))</span>
<span id="cb26-131"><a href="#cb26-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-132"><a href="#cb26-132" aria-hidden="true" tabindex="-1"></a>ver <span class="ot">&lt;-</span> ver <span class="sc">%&gt;%</span></span>
<span id="cb26-133"><a href="#cb26-133" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unite</span>(fecha_de_ingreso, fecha_de_ingreso, fecha_ingreso) <span class="sc">%&gt;%</span></span>
<span id="cb26-134"><a href="#cb26-134" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unite</span>(otros_datos, otros_datos, otro_datos) <span class="sc">%&gt;%</span></span>
<span id="cb26-135"><a href="#cb26-135" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb26-136"><a href="#cb26-136" aria-hidden="true" tabindex="-1"></a>        <span class="at">otros_datos =</span> <span class="fu">str_remove_all</span>(otros_datos, <span class="st">"_NA"</span>),</span>
<span id="cb26-137"><a href="#cb26-137" aria-hidden="true" tabindex="-1"></a>        <span class="at">otros_datos =</span> <span class="fu">str_remove_all</span>(otros_datos, <span class="st">"NA_"</span>)</span>
<span id="cb26-138"><a href="#cb26-138" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb26-139"><a href="#cb26-139" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb26-140"><a href="#cb26-140" aria-hidden="true" tabindex="-1"></a>        <span class="at">fecha_de_ingreso =</span> <span class="fu">str_remove_all</span>(fecha_de_ingreso, <span class="st">"_NA"</span>),</span>
<span id="cb26-141"><a href="#cb26-141" aria-hidden="true" tabindex="-1"></a>        <span class="at">fecha_de_ingreso =</span> <span class="fu">str_remove_all</span>(fecha_de_ingreso, <span class="st">"NA_"</span>),</span>
<span id="cb26-142"><a href="#cb26-142" aria-hidden="true" tabindex="-1"></a>        <span class="at">fecha_de_ingreso =</span> <span class="fu">as_datetime</span>(fecha_de_ingreso)</span>
<span id="cb26-143"><a href="#cb26-143" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb26-144"><a href="#cb26-144" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb26-145"><a href="#cb26-145" aria-hidden="true" tabindex="-1"></a>        <span class="at">dependencia =</span> <span class="fu">str_remove_all</span>(dependencia, <span class="st">"Alcaldía "</span>),</span>
<span id="cb26-146"><a href="#cb26-146" aria-hidden="true" tabindex="-1"></a>        <span class="at">dependencia =</span> <span class="fu">str_remove_all</span>(dependencia, <span class="st">"Delegación "</span>),</span>
<span id="cb26-147"><a href="#cb26-147" aria-hidden="true" tabindex="-1"></a>        <span class="at">dependencia =</span> <span class="fu">str_remove_all</span>(dependencia, <span class="st">"[.]$"</span>),</span>
<span id="cb26-148"><a href="#cb26-148" aria-hidden="true" tabindex="-1"></a>        <span class="at">dependencia =</span> <span class="fu">str_remove_all</span>(dependencia, <span class="st">"de la Ciudad de México"</span>),</span>
<span id="cb26-149"><a href="#cb26-149" aria-hidden="true" tabindex="-1"></a>        <span class="at">dependencia =</span> <span class="fu">str_remove_all</span>(dependencia, <span class="st">"del Distrito Federal"</span>),</span>
<span id="cb26-150"><a href="#cb26-150" aria-hidden="true" tabindex="-1"></a>        <span class="at">dependencia =</span> <span class="fu">str_trim</span>(dependencia, <span class="st">"both"</span>),</span>
<span id="cb26-151"><a href="#cb26-151" aria-hidden="true" tabindex="-1"></a>        <span class="at">dependencia =</span> <span class="fu">str_replace_all</span>(dependencia, <span class="st">"Gustavo A Madero"</span>, <span class="st">"Gustavo A. Madero"</span>)</span>
<span id="cb26-152"><a href="#cb26-152" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb26-153"><a href="#cb26-153" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb26-154"><a href="#cb26-154" aria-hidden="true" tabindex="-1"></a>        <span class="at">dependencia =</span> <span class="fu">str_trim</span>(dependencia, <span class="st">"both"</span>)</span>
<span id="cb26-155"><a href="#cb26-155" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb26-156"><a href="#cb26-156" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(fecha_de_ingreso)) <span class="sc">%&gt;%</span></span>
<span id="cb26-157"><a href="#cb26-157" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(<span class="fu">as.character</span>(folio)) <span class="sc">%&gt;%</span></span>
<span id="cb26-158"><a href="#cb26-158" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb26-159"><a href="#cb26-159" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb26-160"><a href="#cb26-160" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span><span class="dv">16</span>)</span>
<span id="cb26-161"><a href="#cb26-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-162"><a href="#cb26-162" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(<span class="fu">as.factor</span>(ver<span class="sc">$</span>dependencia))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "Agencia de Atención Animal"                                                                                        
  [2] "Agencia de Gestión Urbana"                                                                                         
  [3] "Agencia de Protección Sanitaria"                                                                                   
  [4] "Agencia de Protección Sanitaria del Gobierno"                                                                      
  [5] "Agencia Digital de Innovación Pública"                                                                             
  [6] "Álvaro Obregón"                                                                                                    
  [7] "Asamblea Legislativa"                                                                                              
  [8] "Auditoría Superior"                                                                                                
  [9] "Autoridad de Espacios Públicos"                                                                                    
 [10] "Autoridad de la Zona Patrimonio Mundial Natural y Cultural de la Humanidad en Xochimilco, Tláhuac y Milpa Alta"    
 [11] "Autoridad del Centro Histórico"                                                                                    
 [12] "Autoridad del Espacio Público"                                                                                     
 [13] "Azcapotzalco"                                                                                                      
 [14] "Benito Juárez"                                                                                                     
 [15] "Caja de Previsión de la Policía Auxiliar"                                                                          
 [16] "Caja de Previsión de la Policía Preventiva"                                                                        
 [17] "Caja de Previsión para Trabajadores a Lista de Raya"                                                               
 [18] "Calidad de Vida, Progreso y Desarrollo para la Ciudad de México, S.A. de C.V"                                      
 [19] "Calidad de Vida, Progreso y Desarrollo para la Ciudad de México, SA de CV"                                         
 [20] "Centro de Atención a Emergencias y Protección Ciudadana"                                                           
 [21] "Centro de Comando, Control, Cómputo, Comunicaciones y Contacto Ciudadano"                                          
 [22] "Comisión de Búsqueda de Personas"                                                                                  
 [23] "Comisión de Derechos Humanos"                                                                                      
 [24] "Comisión de Filmaciones"                                                                                           
 [25] "Comisión Ejecutiva de Atención a Víctimas"                                                                         
 [26] "Comisión para la Reconstrucción"                                                                                   
 [27] "Comisión para la Reconstrucción, Recuperación y Transformación , en una CDMX cada vez más resiliente"              
 [28] "Congreso"                                                                                                          
 [29] "Consejería Jurídica y de Servicios Legales"                                                                        
 [30] "Consejo de Evaluación"                                                                                             
 [31] "Consejo de Evaluación del Desarrollo Social"                                                                       
 [32] "Consejo de la Judicatura"                                                                                          
 [33] "Consejo Económico y Social"                                                                                        
 [34] "Consejo para Prevenir y Eliminar la Discriminación en la Ciudad de México"                                         
 [35] "Contaduría Mayor de Hacienda de la Asamblea Legislativa del D.F"                                                   
 [36] "Contaduría Mayor de Hacienda de la Asamblea Legislativa del DF"                                                    
 [37] "Contraloría General"                                                                                               
 [38] "Coordinación de los Centros de Transferencia Modal"                                                                
 [39] "Corporación Mexicana de Impresión S.A. de C.V"                                                                     
 [40] "Corporación Mexicana de Impresión SA de CV"                                                                        
 [41] "Corporación Mexicana de Impresión, S.A. de C.V"                                                                    
 [42] "Coyoacán"                                                                                                          
 [43] "Cuajimalpa de Morelos"                                                                                             
 [44] "Cuauhtémoc"                                                                                                        
 [45] "Encuentro Social"                                                                                                  
 [46] "Escuela de Administración Pública"                                                                                 
 [47] "Fideicomiso Bienestar Educativo"                                                                                   
 [48] "Fideicomiso Central de Abasto"                                                                                     
 [49] "Fideicomiso Centro Histórico"                                                                                      
 [50] "Fideicomiso de Recuperación Crediticia"                                                                            
 [51] "Fideicomiso de Recuperación Crediticia  (FIDERE III)"                                                              
 [52] "Fideicomiso Educación Garantizada"                                                                                 
 [53] "Fideicomiso Fondo de Promoción para el Financiamiento del Transporte Público"                                      
 [54] "Fideicomiso Fondo para el Desarrollo Económico y Social"                                                           
 [55] "Fideicomiso Museo de Arte Popular Mexicano"                                                                        
 [56] "Fideicomiso Museo del Estanquillo"                                                                                 
 [57] "Fideicomiso para el Fondo de Promoción para el Financiamiento del Transporte Público"                              
 [58] "Fideicomiso para el Mejoramiento de las Vías de Comunicación"                                                      
 [59] "Fideicomiso para la Promoción y Desarrollo del Cine Mexicano en el Distrito Federal"                               
 [60] "Fideicomiso para la Promoción y Desarrollo del Cine Mexicano en la Ciudad de México"                               
 [61] "Fideicomiso para la Reconstrucción"                                                                                
 [62] "Fideicomiso Público \"Ciudad Digital\""                                                                            
 [63] "Fideicomiso Público Complejo Ambiental Xochimilco"                                                                 
 [64] "Fideicomiso Público de la Zona de Santa Fe"                                                                        
 [65] "Fideicomiso Público del Fondo de Apoyo a la Procuración de Justicia"                                               
 [66] "Fiscalía General de Justicia de la CDMX"                                                                           
 [67] "Fiscalía Generar de Justicia de la CDMX"                                                                           
 [68] "Fondo Ambiental Público"                                                                                           
 [69] "Fondo de Desarrollo Económico"                                                                                     
 [70] "Fondo de Desarrollo Económico  (FONDECO)"                                                                          
 [71] "Fondo de Seguridad Pública"                                                                                        
 [72] "Fondo Mixto de Promoción Turística"                                                                                
 [73] "Fondo para el Desarrollo Social"                                                                                   
 [74] "Fondo para la Atención y Apoyo a las Víctimas del Delito"                                                          
 [75] "Fondo Público de Atención al Ciclista y al Peatón"                                                                 
 [76] "Fuerza Social por México"                                                                                          
 [77] "Gustavo A. Madero"                                                                                                 
 [78] "Heroico Cuerpo de Bomberos"                                                                                        
 [79] "Instancia Ejecutora del Sistema Integral de Derechos Humanos"                                                      
 [80] "Instituto de Acceso a la Información Pública y Protección de Datos Personales"                                     
 [81] "Instituto de Capacitación para el Trabajo"                                                                         
 [82] "Instituto de Educación Media Superior"                                                                             
 [83] "Instituto de Formación Profesional"                                                                                
 [84] "Instituto de Formación Profesional (PGJDF)"                                                                        
 [85] "Instituto de la Juventud"                                                                                          
 [86] "Instituto de las Mujeres"                                                                                          
 [87] "Instituto de Planeación Democrática y Prospectiva"                                                                 
 [88] "Instituto de Transparencia, Acceso a la Información Pública, Protección de Datos Personales y Rendición de Cuentas"
 [89] "Instituto de Verificación Administrativa"                                                                          
 [90] "Instituto de Vivienda"                                                                                             
 [91] "Instituto del Deporte"                                                                                             
 [92] "Instituto Electoral"                                                                                               
 [93] "Instituto Local de la Infraestructura Física Educativa"                                                            
 [94] "Instituto para la Atención de los Adultos Mayores en el Distrito Federal"                                          
 [95] "Instituto para la Atención y Prevención de las Adicciones en la Ciudad de México"                                  
 [96] "Instituto para la Integración al Desarrollo de las Personas con Discapacidad"                                      
 [97] "Instituto para la Seguridad de las Construcciones en el Distrito Federal"                                          
 [98] "Instituto para la Seguridad de las Construcciones en la Ciudad de México"                                          
 [99] "Instituto Técnico de Formación Policial"                                                                           
[100] "Iztacalco"                                                                                                         
[101] "Iztapalapa"                                                                                                        
[102] "Jefatura de Gobierno"                                                                                              
[103] "Junta de Asistencia Privada"                                                                                       
[104] "Junta Local de Conciliación y Arbitraje"                                                                           
[105] "La Magdalena Contreras"                                                                                            
[106] "Metrobús"                                                                                                          
[107] "Miguel Hidalgo"                                                                                                    
[108] "Milpa Alta"                                                                                                        
[109] "MORENA"                                                                                                            
[110] "Movimiento Ciudadano"                                                                                              
[111] "Oficialía Mayor"                                                                                                   
[112] "Oficialía Mayor del Gobierno"                                                                                      
[113] "Órgano Regulador de Transporte"                                                                                    
[114] "P - MORENA"                                                                                                        
[115] "P - Movimiento Ciudadano"                                                                                          
[116] "P - Nueva Alianza"                                                                                                 
[117] "P - Partido Acción Nacional"                                                                                       
[118] "P - Partido de la Revolución Democrática"                                                                          
[119] "P - Partido del Trabajo"                                                                                           
[120] "P - Partido Revolucionario Institucional"                                                                          
[121] "P - Partido Socialdemócrata"                                                                                       
[122] "P - Partido Verde Ecologista de México"                                                                            
[123] "Partido Acción Nacional"                                                                                           
[124] "Partido de la Revolución Democrática"                                                                              
[125] "Partido del Trabajo"                                                                                               
[126] "Partido Encuentro Solidario"                                                                                       
[127] "Partido Equidad, Libertad y Género"                                                                                
[128] "Partido Revolucionario Institucional"                                                                              
[129] "Partido Verde Ecologista de México"                                                                                
[130] "Planta de Asfalto"                                                                                                 
[131] "Policia Auxiliar"                                                                                                  
[132] "Policía Auxiliar"                                                                                                  
[133] "Policía Bancaria e Industrial"                                                                                     
[134] "PROCDMX, S.A. DE C.V"                                                                                              
[135] "Procuraduría Ambiental y del Ordenamiento Territorial"                                                             
[136] "Procuraduría General de Justicia"                                                                                  
[137] "Procuraduría Social"                                                                                               
[138] "Proyecto Metro"                                                                                                    
[139] "Red de Transporte de Pasajeros"                                                                                    
[140] "Red de Transporte Público de Pasajeros"                                                                            
[141] "Red de Transporte Público de Pasajeros  (RTP)"                                                                     
[142] "Régimen de Protección Social en Salud"                                                                             
[143] "Secretaría de Administración y Finanzas"                                                                           
[144] "Secretaría de Ciencia, Tecnología e Innovación"                                                                    
[145] "Secretaría de Cultura"                                                                                             
[146] "Secretaría de Desarrollo Económico"                                                                                
[147] "Secretaría de Desarrollo Rural y Equidad para las Comunidades"                                                     
[148] "Secretaría de Desarrollo Social"                                                                                   
[149] "Secretaría de Desarrollo Urbano y Vivienda"                                                                        
[150] "Secretaría de Educación"                                                                                           
[151] "Secretaría de Educación, Ciencia, Tecnología e Innovación"                                                         
[152] "Secretaría de Finanzas"                                                                                            
[153] "Secretaría de Gestión Integral de Riesgos y Protección Civil"                                                      
[154] "Secretaría de Gobierno"                                                                                            
[155] "Secretaría de Inclusión y Bienestar Social"                                                                        
[156] "Secretaría de la Contraloría General"                                                                              
[157] "Secretaría de las Mujeres"                                                                                         
[158] "Secretaría de Movilidad"                                                                                           
[159] "Secretaría de Obras y Servicios"                                                                                   
[160] "Secretaría de Protección Civil"                                                                                    
[161] "Secretaría de Pueblos y Barrios Originarios y Comunidades Indígenas Residentes"                                    
[162] "Secretaría de Salud"                                                                                               
[163] "Secretaría de Seguridad Ciudadana"                                                                                 
[164] "Secretaría de Seguridad Pública"                                                                                   
[165] "Secretaría de Trabajo y Fomento al Empleo"                                                                         
[166] "Secretaría de Transportes y Vialidad"                                                                              
[167] "Secretaría de Turismo"                                                                                             
[168] "Secretaría del Medio Ambiente"                                                                                     
[169] "Secretaría Ejecutiva del Mecanismo de Seguimiento y Evaluación del Programa de Derechos Humanos"                   
[170] "Secretaría Ejecutiva del Sistema Anticorrupción"                                                                   
[171] "Servicio de Medios Públicos"                                                                                       
[172] "Servicio de Transportes Eléctricos"                                                                                
[173] "Servicios de Salud Pública"                                                                                        
[174] "Servicios Metropolitanos, S.A. de C.V"                                                                             
[175] "Servicios Metropolitanos, SA de CV"                                                                                
[176] "Sistema de Aguas"                                                                                                  
[177] "Sistema de Movilidad 1 (Sistema M1)"                                                                               
[178] "Sistema de Radio y Televisión Digital del Gobierno  (Capital 21)"                                                  
[179] "Sistema de Transporte Colectivo"                                                                                   
[180] "Sistema para el Desarrollo Integral de la Familia"                                                                 
[181] "Sistema Público de Radiodifusión"                                                                                  
[182] "Tláhuac"                                                                                                           
[183] "Tlalpan"                                                                                                           
[184] "Tribunal de Justicia Administrativa"                                                                               
[185] "Tribunal de lo Contencioso Administrativo"                                                                         
[186] "Tribunal Electoral"                                                                                                
[187] "Tribunal Superior de Justicia"                                                                                     
[188] "Universidad Autónoma"                                                                                              
[189] "Universidad de la Policía"                                                                                         
[190] "Universidad de la Salud"                                                                                           
[191] "Venustiano Carranza"                                                                                               
[192] "Xochimilco"                                                                                                        </code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(ver)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 40269</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># write_xlsx(ver, "SIP_agua.xlsx")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Los datos de la APi tienen 14 variables:</p>
<ol type="1">
<li>folio: Identificador único de la solicitud.</li>
<li>fecha_de_ingreso: Fecha y hora en la que se ingresó la solicitud.</li>
<li>dependencia: nombre de la institución pública a la que se realizó la solicitud</li>
<li>organo_de_gobierno: ámbito al que pertenece la dependencia (alcaldías, administración pública central, fondos y fideicomisos, etc.).</li>
<li>descripcion_solicitud: texto de la solicitud realizada por la persona solicitante.</li>
<li>estatus: Estado actual de la solicitud (pendiente, desechada, en proceso, terminada, etc.).</li>
<li>medio_entrada: Medio por el cual se ingresó la solicitud (telefónico, presentada en la Unidad de Transparencia, por medio electrónicos, etc.)</li>
<li>otros_datos: Otros datos relevantes de la solicitud registrados por la persona solicitante, mismos que no son obligatorios.</li>
<li>fecha_limite_de_respuesta: Fecha límite para la respuesta de la solicitud en función de la fecha de ingreso y alguno de los siguientes supuestos: si se determina competencia (3 días), prevención (10 días después de la notificación), si ya se encuentra publicada al ser una obligación de transparencia (5 días) o bien 9 días una vez aceptada la solicitud.</li>
<li>respuesta: variable categórica con una clasificación del tipo de respuesta de la dependencia (entrega de información, prevenida, improcedente, registro de pago, etc.).</li>
<li>texto_de_la_respuesta: Texto de la respuesta a la solicitud no disponible en todas las SIP, ya que en muchos casos se remite al oficio de respuesta enviado a través del sistema INFOMEX o de la PNT.</li>
<li>pais: País de origen de la solicitud (en su mayoría México) y no obligatorio.</li>
<li>estado: Estado de origen de la solicitud (en su mayoría Ciudad de México) y no obligatorio.</li>
<li>fecha_respuesta: Fecha en la que la dependencia dio la respuesta a la solicitud.</li>
</ol>
</section>
<section id="k---means" class="level2">
<h2 class="anchored" data-anchor-id="k---means">K - means</h2>
<p>Para hacer un análisis más detallado, utilicé un algoritmo de clasificación no supervisada k-means con <em>6 clusters</em>. De ahí tomé una muestra de 300 solicitudes, 50 por cada grupo. Con un análisis de palabras frecuentes y lectura de las SIP en la muestra, etiqueté y filtré manualmente (en caso de que hubiera solicitudes que no tuvieran relación con el tema, por ejemplo:solicitudes relacionadas con una calle llamada lluvia), hasta contar con un subconjunto de 273 SIP, mismo que se empleó para ejecutar un algoritmo de clasificación supervisada, en donde esta muestra funcionó como base de datos de entrenamiento, para etiquetar las 40,269 solicitudes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.feature_extraction.text <span class="im">import</span> TfidfVectorizer</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.cluster <span class="im">import</span> KMeans</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> adjusted_rand_score</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.decomposition <span class="im">import</span> PCA</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> silhouette_score</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> nltk</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.corpus <span class="im">import</span> stopwords</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> openpyxl</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_excel(<span class="st">"D:/dhumb/Documents/projects/data_blog/agua/SIP_agua.xlsx"</span>)</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> df</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>vectorizer <span class="op">=</span> TfidfVectorizer()</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> vectorizer.fit_transform(data[<span class="st">'descripcion_solicitud'</span>])</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplicar k-means</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>kmeans <span class="op">=</span> KMeans(n_clusters<span class="op">=</span><span class="dv">6</span>, random_state<span class="op">=</span><span class="dv">0</span>, n_init<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>clusters <span class="op">=</span> kmeans.fit_predict(X)</span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregar los resultados al DataFrame</span></span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>data[<span class="st">'cluster'</span>] <span class="op">=</span> clusters</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="ensamble-learning" class="level2">
<h2 class="anchored" data-anchor-id="ensamble-learning">Ensamble learning</h2>
<p>Para este último paso, la clasificación supervisada de textos, es necesario entrenar un modelo de aprendizaje automático con una muestra de datos ya etiquetados, con el objetivo de que el modelo aprenda a clasificar datos nuevos. Se aplicó un preprocesamiento de los textos para convertirlos en vectores numéricos, y se entrenó un modelo de ensamble que combina diferentes clasificadores (SVM, regresión logística y Naive Bayes) utilizando validación cruzada estratificada para encontrar los mejores hiperparámetros a través de GridSearchCV. Una vez que el modelo se entrenó, se usó para predecir las etiquetas de la descripción de las solicitudes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.feature_extraction.text <span class="im">import</span> TfidfVectorizer</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.pipeline <span class="im">import</span> Pipeline</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> GridSearchCV, StratifiedKFold</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> VotingClassifier</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.naive_bayes <span class="im">import</span> MultinomialNB</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LogisticRegression</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.svm <span class="im">import</span> SVC</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> classification_report</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargar datos de muestra etiquetados</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>df_labeled <span class="op">=</span> pd.read_excel(</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"D:/dhumb/Documents/projects/data_blog/agua/Muestra.xlsx"</span>)</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Separar datos de muestra en características y etiquetas</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>X_train <span class="op">=</span> df_labeled[<span class="st">'descripcion_solicitud'</span>]</span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>y_train <span class="op">=</span> df_labeled[<span class="st">'label'</span>]</span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Vectorizar datos de muestra y conjunto de datos original</span></span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>vectorizer <span class="op">=</span> TfidfVectorizer(max_features<span class="op">=</span><span class="dv">4500</span>)</span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>X_train_vectorized <span class="op">=</span> vectorizer.fit_transform(X_train)</span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Definir modelos</span></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a>nb_model <span class="op">=</span> MultinomialNB()</span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>svm_model <span class="op">=</span> SVC(probability<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a>lr_model <span class="op">=</span> LogisticRegression()</span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Definir ensamble de modelos con GridSearchCV</span></span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a>estimators <span class="op">=</span> [(<span class="st">'nb'</span>, nb_model), (<span class="st">'svm'</span>, svm_model), (<span class="st">'lr'</span>, lr_model)]</span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a>voting_model <span class="op">=</span> VotingClassifier(estimators<span class="op">=</span>estimators, voting<span class="op">=</span><span class="st">'soft'</span>)</span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Definir parámetros para GridSearchCV</span></span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a>params <span class="op">=</span> {</span>
<span id="cb32-34"><a href="#cb32-34" aria-hidden="true" tabindex="-1"></a>    <span class="st">'nb__alpha'</span>: [<span class="fl">0.5</span>, <span class="dv">1</span>, <span class="dv">2</span>],</span>
<span id="cb32-35"><a href="#cb32-35" aria-hidden="true" tabindex="-1"></a>    <span class="st">'svm__C'</span>: [<span class="fl">0.1</span>, <span class="dv">1</span>, <span class="dv">10</span>],</span>
<span id="cb32-36"><a href="#cb32-36" aria-hidden="true" tabindex="-1"></a>    <span class="st">'lr__C'</span>: [<span class="fl">0.1</span>, <span class="dv">1</span>, <span class="dv">10</span>]</span>
<span id="cb32-37"><a href="#cb32-37" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb32-38"><a href="#cb32-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-39"><a href="#cb32-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Definir validación cruzada estratificada con 5 particiones</span></span>
<span id="cb32-40"><a href="#cb32-40" aria-hidden="true" tabindex="-1"></a>cv <span class="op">=</span> StratifiedKFold(n_splits<span class="op">=</span><span class="dv">5</span>)</span>
<span id="cb32-41"><a href="#cb32-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-42"><a href="#cb32-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajustar ensamble de modelos utilizando GridSearchCV y validación cruzada estratificada</span></span>
<span id="cb32-43"><a href="#cb32-43" aria-hidden="true" tabindex="-1"></a>grid_search <span class="op">=</span> GridSearchCV(voting_model, params, cv<span class="op">=</span>cv)</span>
<span id="cb32-44"><a href="#cb32-44" aria-hidden="true" tabindex="-1"></a>grid_search.fit(X_train_vectorized, y_train)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<style>#sk-container-id-1 {color: black;background-color: white;}#sk-container-id-1 pre{padding: 0;}#sk-container-id-1 div.sk-toggleable {background-color: white;}#sk-container-id-1 label.sk-toggleable__label {cursor: pointer;display: block;width: 100%;margin-bottom: 0;padding: 0.3em;box-sizing: border-box;text-align: center;}#sk-container-id-1 label.sk-toggleable__label-arrow:before {content: "▸";float: left;margin-right: 0.25em;color: #696969;}#sk-container-id-1 label.sk-toggleable__label-arrow:hover:before {color: black;}#sk-container-id-1 div.sk-estimator:hover label.sk-toggleable__label-arrow:before {color: black;}#sk-container-id-1 div.sk-toggleable__content {max-height: 0;max-width: 0;overflow: hidden;text-align: left;background-color: #f0f8ff;}#sk-container-id-1 div.sk-toggleable__content pre {margin: 0.2em;color: black;border-radius: 0.25em;background-color: #f0f8ff;}#sk-container-id-1 input.sk-toggleable__control:checked~div.sk-toggleable__content {max-height: 200px;max-width: 100%;overflow: auto;}#sk-container-id-1 input.sk-toggleable__control:checked~label.sk-toggleable__label-arrow:before {content: "▾";}#sk-container-id-1 div.sk-estimator input.sk-toggleable__control:checked~label.sk-toggleable__label {background-color: #d4ebff;}#sk-container-id-1 div.sk-label input.sk-toggleable__control:checked~label.sk-toggleable__label {background-color: #d4ebff;}#sk-container-id-1 input.sk-hidden--visually {border: 0;clip: rect(1px 1px 1px 1px);clip: rect(1px, 1px, 1px, 1px);height: 1px;margin: -1px;overflow: hidden;padding: 0;position: absolute;width: 1px;}#sk-container-id-1 div.sk-estimator {font-family: monospace;background-color: #f0f8ff;border: 1px dotted black;border-radius: 0.25em;box-sizing: border-box;margin-bottom: 0.5em;}#sk-container-id-1 div.sk-estimator:hover {background-color: #d4ebff;}#sk-container-id-1 div.sk-parallel-item::after {content: "";width: 100%;border-bottom: 1px solid gray;flex-grow: 1;}#sk-container-id-1 div.sk-label:hover label.sk-toggleable__label {background-color: #d4ebff;}#sk-container-id-1 div.sk-serial::before {content: "";position: absolute;border-left: 1px solid gray;box-sizing: border-box;top: 0;bottom: 0;left: 50%;z-index: 0;}#sk-container-id-1 div.sk-serial {display: flex;flex-direction: column;align-items: center;background-color: white;padding-right: 0.2em;padding-left: 0.2em;position: relative;}#sk-container-id-1 div.sk-item {position: relative;z-index: 1;}#sk-container-id-1 div.sk-parallel {display: flex;align-items: stretch;justify-content: center;background-color: white;position: relative;}#sk-container-id-1 div.sk-item::before, #sk-container-id-1 div.sk-parallel-item::before {content: "";position: absolute;border-left: 1px solid gray;box-sizing: border-box;top: 0;bottom: 0;left: 50%;z-index: -1;}#sk-container-id-1 div.sk-parallel-item {display: flex;flex-direction: column;z-index: 1;position: relative;background-color: white;}#sk-container-id-1 div.sk-parallel-item:first-child::after {align-self: flex-end;width: 50%;}#sk-container-id-1 div.sk-parallel-item:last-child::after {align-self: flex-start;width: 50%;}#sk-container-id-1 div.sk-parallel-item:only-child::after {width: 0;}#sk-container-id-1 div.sk-dashed-wrapped {border: 1px dashed gray;margin: 0 0.4em 0.5em 0.4em;box-sizing: border-box;padding-bottom: 0.4em;background-color: white;}#sk-container-id-1 div.sk-label label {font-family: monospace;font-weight: bold;display: inline-block;line-height: 1.2em;}#sk-container-id-1 div.sk-label-container {text-align: center;}#sk-container-id-1 div.sk-container {/* jupyter's `normalize.less` sets `[hidden] { display: none; }` but bootstrap.min.css set `[hidden] { display: none !important; }` so we also need the `!important` here to be able to override the default hidden behavior on the sphinx rendered scikit-learn.org. See: https://github.com/scikit-learn/scikit-learn/issues/21755 */display: inline-block !important;position: relative;}#sk-container-id-1 div.sk-text-repr-fallback {display: none;}</style><div id="sk-container-id-1" class="sk-top-container"><div class="sk-text-repr-fallback"><pre>GridSearchCV(cv=StratifiedKFold(n_splits=5, random_state=None, shuffle=False),
             estimator=VotingClassifier(estimators=[('nb', MultinomialNB()),
                                                    ('svm',
                                                     SVC(probability=True)),
                                                    ('lr',
                                                     LogisticRegression())],
                                        voting='soft'),
             param_grid={'lr__C': [0.1, 1, 10], 'nb__alpha': [0.5, 1, 2],
                         'svm__C': [0.1, 1, 10]})</pre><b>In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. <br>On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.</b></div><div class="sk-container" hidden=""><div class="sk-item sk-dashed-wrapped"><div class="sk-label-container"><div class="sk-label sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-1" type="checkbox"><label for="sk-estimator-id-1" class="sk-toggleable__label sk-toggleable__label-arrow">GridSearchCV</label><div class="sk-toggleable__content"><pre>GridSearchCV(cv=StratifiedKFold(n_splits=5, random_state=None, shuffle=False),
             estimator=VotingClassifier(estimators=[('nb', MultinomialNB()),
                                                    ('svm',
                                                     SVC(probability=True)),
                                                    ('lr',
                                                     LogisticRegression())],
                                        voting='soft'),
             param_grid={'lr__C': [0.1, 1, 10], 'nb__alpha': [0.5, 1, 2],
                         'svm__C': [0.1, 1, 10]})</pre></div></div></div><div class="sk-parallel"><div class="sk-parallel-item"><div class="sk-item"><div class="sk-label-container"><div class="sk-label sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-2" type="checkbox"><label for="sk-estimator-id-2" class="sk-toggleable__label sk-toggleable__label-arrow">estimator: VotingClassifier</label><div class="sk-toggleable__content"><pre>VotingClassifier(estimators=[('nb', MultinomialNB()),
                             ('svm', SVC(probability=True)),
                             ('lr', LogisticRegression())],
                 voting='soft')</pre></div></div></div><div class="sk-serial"><div class="sk-item sk-dashed-wrapped"><div class="sk-parallel"><div class="sk-parallel-item"><div class="sk-item"><div class="sk-label-container"><div class="sk-label sk-toggleable"><label>nb</label></div></div><div class="sk-serial"><div class="sk-item"><div class="sk-estimator sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-3" type="checkbox"><label for="sk-estimator-id-3" class="sk-toggleable__label sk-toggleable__label-arrow">MultinomialNB</label><div class="sk-toggleable__content"><pre>MultinomialNB()</pre></div></div></div></div></div></div><div class="sk-parallel-item"><div class="sk-item"><div class="sk-label-container"><div class="sk-label sk-toggleable"><label>svm</label></div></div><div class="sk-serial"><div class="sk-item"><div class="sk-estimator sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-4" type="checkbox"><label for="sk-estimator-id-4" class="sk-toggleable__label sk-toggleable__label-arrow">SVC</label><div class="sk-toggleable__content"><pre>SVC(probability=True)</pre></div></div></div></div></div></div><div class="sk-parallel-item"><div class="sk-item"><div class="sk-label-container"><div class="sk-label sk-toggleable"><label>lr</label></div></div><div class="sk-serial"><div class="sk-item"><div class="sk-estimator sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-5" type="checkbox"><label for="sk-estimator-id-5" class="sk-toggleable__label sk-toggleable__label-arrow">LogisticRegression</label><div class="sk-toggleable__content"><pre>LogisticRegression()</pre></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Imprimir mejores hiperparámetros encontrados por GridSearchCV</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Mejores hiperparámetros encontrados por GridSearchCV:"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Mejores hiperparámetros encontrados por GridSearchCV:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(grid_search.best_params_)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'lr__C': 10, 'nb__alpha': 2, 'svm__C': 10}</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargar datos del conjunto de datos original</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>df_unlabeled <span class="op">=</span> pd.read_excel(</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"D:/dhumb/Documents/projects/data_blog/agua/SIP_agua.xlsx"</span>)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Quitar los datos etiquetados de la muestra</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>df_unlabeled <span class="op">=</span> df_unlabeled[<span class="op">~</span>df_unlabeled[<span class="st">'folio'</span>].isin(df_labeled[<span class="st">'folio'</span>])]</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Vectorizar datos del conjunto de datos original</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>X_unlabeled <span class="op">=</span> df_unlabeled[<span class="st">'descripcion_solicitud'</span>]</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>X_unlabeled_vectorized <span class="op">=</span> vectorizer.transform(X_unlabeled)</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Predecir etiquetas para el conjunto de datos original</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> grid_search.predict(X_unlabeled_vectorized)</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregar etiquetas al conjunto de datos original</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>df_unlabeled[<span class="st">'etiqueta'</span>] <span class="op">=</span> y_pred</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Imprimir reporte de clasificación</span></span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(classification_report(y_train, grid_search.predict(X_train_vectorized)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                      precision    recall  f1-score   support

                                      Abastecimiento       1.00      1.00      1.00        26
Diagnósticos, informes, reportes, opiniones técnicas       1.00      1.00      1.00        18
                                   Impacto ambiental       1.00      1.00      1.00         5
                             Infraestructura y obras       1.00      1.00      1.00        34
                      Mantenimiento y rehabilitación       1.00      0.94      0.97        18
                                    Pago de derechos       0.95      1.00      0.98        60
                                Permisos y contratos       0.98      1.00      0.99        42
                                               Pipas       1.00      1.00      1.00        62
                                         Presupuesto       1.00      0.62      0.77         8

                                            accuracy                           0.99       273
                                           macro avg       0.99      0.95      0.97       273
                                        weighted avg       0.99      0.99      0.98       273</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Une los datos</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.concat([df_unlabeled, df_labeled])</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="co">#data.to_excel('D:/dhumb/Documents/projects/data_blog/agua/ensamble_2.xlsx', index=False)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>En total se definieron nueve categorías que se listan a continuación:</p>
<ol type="1">
<li>Abastecimiento. Se refiere a la distribución de agua en la CDMX, extracción de esta y prestación del servicio.</li>
<li>Diagnósticos, informes, reportes, opiniones técnicas. Sobre los estudios, diagnósticos o informes generados sobre el agua.</li>
<li>Impacto ambiental. Los estudios de impacto ambiental solicitados por las personas.</li>
<li>Infraestructura y obras. Se refiere a las solicitudes del mapa de distribución, ubicación de pozos, proyectos de obras hidráulicas.</li>
<li>Mantenimiento y rehabilitación. En esta categoría se encuentran los trabajos de rehabilitación, reparación de fugas y mantenimiento de la red hidráulica.</li>
<li>Pago de derechos. Se refiere a las tarifas, pago de las mismas o explicación de estas.</li>
<li>Permisos y contratos. Estas solicitudes se refieren a los permisos otorgados a obras, por ejemplo departamentos o plazas comerciales.</li>
<li>Pipas. Se refiere a aquellas solicitudes donde se solicita información sobre las pipas de agua (horarios, costos, etc.).</li>
<li>Presupuesto. En esta categoría se encuentran las solicitudes que preguntan por los presupuestos para el pago de agua (garrafones, botellas, tarifas, etc.).</li>
</ol>
</section>
<section id="visualizaciones" class="level2">
<h2 class="anchored" data-anchor-id="visualizaciones">Visualizaciones</h2>
<p>Y después de tirar código es moemnto de… tirar más código :D Pero esta vez para poder sacar conclusiones de los datos que ya se han trabajado. Estas gráficas son propuestas que están en el reporte ya mencionado, así como otras que no quedaron por falta de espacio y detalle para explicarlas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tm' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: NLP</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'NLP'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:httr':

    content</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(clipr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'clipr' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Welcome to clipr. See ?write_clip for advisories on writing to the clipboard in R.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'scales'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:purrr':

    discard</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: viridisLite</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'viridis'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:scales':

    viridis_pal</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'ggplot2'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:NLP':

    annotate</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(writexl)</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggrepel)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'ggrepel' was built under R version 4.2.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(SnowballC)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'SnowballC' was built under R version 4.2.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Conteo ------------------------------------------------------------------</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"D:/dhumb/Documents/projects/data_blog/agua/ensamble_2.xlsx"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">folio =</span> <span class="fu">as.character</span>(folio),</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">folio =</span> <span class="fu">paste0</span>(<span class="st">"0"</span>, folio),</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">anio =</span> <span class="fu">year</span>(fecha_de_ingreso),</span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">dependencia =</span> <span class="fu">str_remove_all</span>(dependencia, <span class="st">"P - "</span>),</span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">dependencia =</span> <span class="fu">str_remove_all</span>(dependencia, <span class="st">"</span><span class="sc">\\</span><span class="st">(RTP</span><span class="sc">\\</span><span class="st">)"</span>),</span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">dependencia =</span> <span class="fu">str_remove_all</span>(dependencia, <span class="st">"</span><span class="sc">\\</span><span class="st">(FONDECO</span><span class="sc">\\</span><span class="st">)"</span>),</span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">dependencia =</span> <span class="fu">str_remove_all</span>(dependencia, <span class="st">"</span><span class="sc">\\</span><span class="st">(PGJDF</span><span class="sc">\\</span><span class="st">)"</span>),</span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">dependencia =</span> <span class="fu">str_remove_all</span>(dependencia, <span class="st">"</span><span class="sc">\\</span><span class="st">(FIDERE III</span><span class="sc">\\</span><span class="st">)"</span>),</span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">dependencia =</span> <span class="fu">str_remove_all</span>(dependencia, <span class="st">"en el Distrito Federal"</span>),</span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">dependencia =</span> <span class="fu">str_remove_all</span>(dependencia, <span class="st">"en la Ciudad de México"</span>),</span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">dependencia =</span> <span class="fu">str_replace_all</span>(dependencia, <span class="st">"SA de CV"</span>, <span class="st">"S.A. de C.V"</span>),</span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">dependencia =</span> <span class="fu">str_replace_all</span>(dependencia, <span class="st">"Generar"</span>, <span class="st">"General"</span>),</span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">dependencia =</span> <span class="fu">str_replace_all</span>(dependencia, <span class="st">"DF"</span>, <span class="st">"D.F"</span>),</span>
<span id="cb62-18"><a href="#cb62-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">dependencia =</span> <span class="fu">str_replace_all</span>(</span>
<span id="cb62-19"><a href="#cb62-19" aria-hidden="true" tabindex="-1"></a>            dependencia, <span class="st">"Corporación Mexicana de Impresión, S.A. de C.V"</span>,</span>
<span id="cb62-20"><a href="#cb62-20" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Corporación Mexicana de Impresión S.A. de C.V"</span></span>
<span id="cb62-21"><a href="#cb62-21" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb62-22"><a href="#cb62-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">dependencia =</span> <span class="fu">str_replace_all</span>(dependencia, <span class="st">"Policia"</span>, <span class="st">"Policía"</span>),</span>
<span id="cb62-23"><a href="#cb62-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">dependencia =</span> <span class="fu">str_replace_all</span>(dependencia, <span class="st">"</span><span class="sc">\\</span><span class="st">bEncuentro Social</span><span class="sc">\\</span><span class="st">b"</span>, <span class="st">"Partido Encuentro Solidario"</span>),</span>
<span id="cb62-24"><a href="#cb62-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">dependencia =</span> <span class="fu">str_trim</span>(dependencia, <span class="st">"both"</span>),</span>
<span id="cb62-25"><a href="#cb62-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">organo_de_gobierno =</span> <span class="fu">str_replace_all</span>(</span>
<span id="cb62-26"><a href="#cb62-26" aria-hidden="true" tabindex="-1"></a>            organo_de_gobierno,</span>
<span id="cb62-27"><a href="#cb62-27" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Organismos desconcentrados, descentralizados, paraestatales y auxiliares"</span>,</span>
<span id="cb62-28"><a href="#cb62-28" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Organismos desconcentrados,</span><span class="sc">\n</span><span class="st">descentralizados, paraestatales</span><span class="sc">\n</span><span class="st">y auxiliares"</span></span>
<span id="cb62-29"><a href="#cb62-29" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb62-30"><a href="#cb62-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">organo_de_gobierno =</span> <span class="fu">str_replace_all</span>(</span>
<span id="cb62-31"><a href="#cb62-31" aria-hidden="true" tabindex="-1"></a>            organo_de_gobierno,</span>
<span id="cb62-32"><a href="#cb62-32" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Fideicomisos y fondos públicos"</span>,</span>
<span id="cb62-33"><a href="#cb62-33" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Fideicomisos y</span><span class="sc">\n</span><span class="st">fondos públicos"</span></span>
<span id="cb62-34"><a href="#cb62-34" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb62-35"><a href="#cb62-35" aria-hidden="true" tabindex="-1"></a>        <span class="at">etiqueta =</span> <span class="fu">str_replace_all</span>(</span>
<span id="cb62-36"><a href="#cb62-36" aria-hidden="true" tabindex="-1"></a>            etiqueta, <span class="st">"Diagnósticos, informes, reportes, opiniones técnicas"</span>,</span>
<span id="cb62-37"><a href="#cb62-37" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Diagnósticos, informes, </span><span class="sc">\n</span><span class="st">reportes, opiniones técnicas"</span></span>
<span id="cb62-38"><a href="#cb62-38" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb62-39"><a href="#cb62-39" aria-hidden="true" tabindex="-1"></a>        <span class="at">estatus =</span> <span class="fu">str_to_sentence</span>(estatus),</span>
<span id="cb62-40"><a href="#cb62-40" aria-hidden="true" tabindex="-1"></a>        <span class="at">estatus =</span> <span class="fu">ifelse</span>(estatus <span class="sc">==</span> <span class="st">"Proceso"</span>, <span class="st">"En proceso"</span>, estatus),</span>
<span id="cb62-41"><a href="#cb62-41" aria-hidden="true" tabindex="-1"></a>        <span class="at">respuesta =</span> <span class="fu">str_remove_all</span>(respuesta, <span class="st">"</span><span class="sc">\\</span><span class="st">bA[.]"</span>),</span>
<span id="cb62-42"><a href="#cb62-42" aria-hidden="true" tabindex="-1"></a>        <span class="at">respuesta =</span> <span class="fu">str_remove_all</span>(respuesta, <span class="st">"</span><span class="sc">\\</span><span class="st">bB[.]"</span>),</span>
<span id="cb62-43"><a href="#cb62-43" aria-hidden="true" tabindex="-1"></a>        <span class="at">respuesta =</span> <span class="fu">str_remove_all</span>(respuesta, <span class="st">"</span><span class="sc">\\</span><span class="st">bC[.]"</span>),</span>
<span id="cb62-44"><a href="#cb62-44" aria-hidden="true" tabindex="-1"></a>        <span class="at">respuesta =</span> <span class="fu">str_remove_all</span>(respuesta, <span class="st">"</span><span class="sc">\\</span><span class="st">bD[.]"</span>),</span>
<span id="cb62-45"><a href="#cb62-45" aria-hidden="true" tabindex="-1"></a>        <span class="at">respuesta =</span> <span class="fu">str_remove_all</span>(respuesta, <span class="st">"</span><span class="sc">\\</span><span class="st">bE[.]"</span>),</span>
<span id="cb62-46"><a href="#cb62-46" aria-hidden="true" tabindex="-1"></a>        <span class="at">respuesta =</span> <span class="fu">str_remove_all</span>(respuesta, <span class="st">"</span><span class="sc">\\</span><span class="st">bF[.]"</span>),</span>
<span id="cb62-47"><a href="#cb62-47" aria-hidden="true" tabindex="-1"></a>        <span class="at">respuesta =</span> <span class="fu">str_remove_all</span>(respuesta, <span class="st">"</span><span class="sc">\\</span><span class="st">bG[.]"</span>),</span>
<span id="cb62-48"><a href="#cb62-48" aria-hidden="true" tabindex="-1"></a>        <span class="at">respuesta =</span> <span class="fu">str_remove_all</span>(respuesta, <span class="st">"</span><span class="sc">\\</span><span class="st">bH[.]"</span>),</span>
<span id="cb62-49"><a href="#cb62-49" aria-hidden="true" tabindex="-1"></a>        <span class="at">respuesta =</span> <span class="fu">str_replace_all</span>(respuesta, <span class="st">"</span><span class="sc">\\</span><span class="st">bRR</span><span class="sc">\\</span><span class="st">b"</span>, <span class="st">"Recurso de Revisión"</span>),</span>
<span id="cb62-50"><a href="#cb62-50" aria-hidden="true" tabindex="-1"></a>        <span class="at">respuesta =</span> <span class="fu">str_trim</span>(respuesta, <span class="st">"both"</span>),</span>
<span id="cb62-51"><a href="#cb62-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">respuesta =</span> <span class="fu">str_replace_all</span>(respuesta, <span class="st">"à"</span>, <span class="st">"á"</span>),</span>
<span id="cb62-52"><a href="#cb62-52" aria-hidden="true" tabindex="-1"></a>        <span class="at">respuesta =</span> <span class="fu">str_remove_all</span>(respuesta, <span class="st">"[.]$"</span>),</span>
<span id="cb62-53"><a href="#cb62-53" aria-hidden="true" tabindex="-1"></a>        <span class="at">respuesta =</span> <span class="fu">case_when</span>(</span>
<span id="cb62-54"><a href="#cb62-54" aria-hidden="true" tabindex="-1"></a>            <span class="fu">str_detect</span>(respuesta, <span class="fu">regex</span>(<span class="st">"entrega|información"</span>, <span class="at">ignore_case =</span> T)) <span class="sc">~</span> <span class="st">"Entrega de información solicitada"</span>,</span>
<span id="cb62-55"><a href="#cb62-55" aria-hidden="true" tabindex="-1"></a>            T <span class="sc">~</span> respuesta</span>
<span id="cb62-56"><a href="#cb62-56" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb62-57"><a href="#cb62-57" aria-hidden="true" tabindex="-1"></a>        <span class="at">respuesta =</span> <span class="fu">str_to_sentence</span>(respuesta)</span>
<span id="cb62-58"><a href="#cb62-58" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q39998 / R39998C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q39999 / R39999C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40000 / R40000C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40001 / R40001C17: got 'Abastecimiento'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40002 / R40002C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40003 / R40003C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40004 / R40004C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40005 / R40005C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40006 / R40006C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40007 / R40007C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40008 / R40008C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40009 / R40009C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40010 / R40010C17: got 'Presupuesto'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40011 / R40011C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40012 / R40012C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40013 / R40013C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40014 / R40014C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40015 / R40015C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40016 / R40016C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40017 / R40017C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40018 / R40018C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40019 / R40019C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40020 / R40020C17: got 'Presupuesto'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40021 / R40021C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40022 / R40022C17: got 'Mantenimiento y
rehabilitación'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40023 / R40023C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40024 / R40024C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40025 / R40025C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40026 / R40026C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40027 / R40027C17: got 'Abastecimiento'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40028 / R40028C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40029 / R40029C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40030 / R40030C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40031 / R40031C17: got 'Presupuesto'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40032 / R40032C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40033 / R40033C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40034 / R40034C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40035 / R40035C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40036 / R40036C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40037 / R40037C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40038 / R40038C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40039 / R40039C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40040 / R40040C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40041 / R40041C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40042 / R40042C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40043 / R40043C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40044 / R40044C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40045 / R40045C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40046 / R40046C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40047 / R40047C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40048 / R40048C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40049 / R40049C17: got 'Diagnósticos, informes,
reportes, opiniones técnicas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40050 / R40050C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40051 / R40051C17: got 'Impacto ambiental'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40052 / R40052C17: got 'Impacto ambiental'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40053 / R40053C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40054 / R40054C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40055 / R40055C17: got 'Diagnósticos, informes,
reportes, opiniones técnicas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40056 / R40056C17: got 'Presupuesto'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40057 / R40057C17: got 'Diagnósticos, informes,
reportes, opiniones técnicas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40058 / R40058C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40059 / R40059C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40060 / R40060C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40061 / R40061C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40062 / R40062C17: got 'Diagnósticos, informes,
reportes, opiniones técnicas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40063 / R40063C17: got 'Diagnósticos, informes,
reportes, opiniones técnicas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40064 / R40064C17: got 'Mantenimiento y
rehabilitación'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40065 / R40065C17: got 'Mantenimiento y
rehabilitación'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40066 / R40066C17: got 'Diagnósticos, informes,
reportes, opiniones técnicas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40067 / R40067C17: got 'Abastecimiento'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40068 / R40068C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40069 / R40069C17: got 'Impacto ambiental'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40070 / R40070C17: got 'Diagnósticos, informes,
reportes, opiniones técnicas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40071 / R40071C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40072 / R40072C17: got 'Diagnósticos, informes,
reportes, opiniones técnicas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40073 / R40073C17: got 'Abastecimiento'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40074 / R40074C17: got 'Abastecimiento'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40075 / R40075C17: got 'Mantenimiento y
rehabilitación'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40076 / R40076C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40077 / R40077C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40078 / R40078C17: got 'Mantenimiento y
rehabilitación'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40079 / R40079C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40080 / R40080C17: got 'Diagnósticos, informes,
reportes, opiniones técnicas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40081 / R40081C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40082 / R40082C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40083 / R40083C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40084 / R40084C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40085 / R40085C17: got 'Mantenimiento y
rehabilitación'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40086 / R40086C17: got 'Diagnósticos, informes,
reportes, opiniones técnicas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40087 / R40087C17: got 'Presupuesto'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40088 / R40088C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40089 / R40089C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40090 / R40090C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40091 / R40091C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40092 / R40092C17: got 'Mantenimiento y
rehabilitación'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40093 / R40093C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40094 / R40094C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40095 / R40095C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40096 / R40096C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40097 / R40097C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40098 / R40098C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40099 / R40099C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40100 / R40100C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40101 / R40101C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40102 / R40102C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40103 / R40103C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40104 / R40104C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40105 / R40105C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40106 / R40106C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40107 / R40107C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40108 / R40108C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40109 / R40109C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40110 / R40110C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40111 / R40111C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40112 / R40112C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40113 / R40113C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40114 / R40114C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40115 / R40115C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40116 / R40116C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40117 / R40117C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40118 / R40118C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40119 / R40119C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40120 / R40120C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40121 / R40121C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40122 / R40122C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40123 / R40123C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40124 / R40124C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40125 / R40125C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40126 / R40126C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40127 / R40127C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40128 / R40128C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40129 / R40129C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40130 / R40130C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40131 / R40131C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40132 / R40132C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40133 / R40133C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40134 / R40134C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40135 / R40135C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40136 / R40136C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40137 / R40137C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40138 / R40138C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40139 / R40139C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40140 / R40140C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40141 / R40141C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40142 / R40142C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40143 / R40143C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40144 / R40144C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40145 / R40145C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40146 / R40146C17: got 'Mantenimiento y
rehabilitación'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40147 / R40147C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40148 / R40148C17: got 'Diagnósticos, informes,
reportes, opiniones técnicas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40149 / R40149C17: got 'Abastecimiento'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40150 / R40150C17: got 'Abastecimiento'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40151 / R40151C17: got 'Abastecimiento'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40152 / R40152C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40153 / R40153C17: got 'Mantenimiento y
rehabilitación'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40154 / R40154C17: got 'Diagnósticos, informes,
reportes, opiniones técnicas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40155 / R40155C17: got 'Abastecimiento'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40156 / R40156C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40157 / R40157C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40158 / R40158C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40159 / R40159C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40160 / R40160C17: got 'Impacto ambiental'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40161 / R40161C17: got 'Abastecimiento'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40162 / R40162C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40163 / R40163C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40164 / R40164C17: got 'Abastecimiento'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40165 / R40165C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40166 / R40166C17: got 'Impacto ambiental'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40167 / R40167C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40168 / R40168C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40169 / R40169C17: got 'Diagnósticos, informes,
reportes, opiniones técnicas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40170 / R40170C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40171 / R40171C17: got 'Abastecimiento'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40172 / R40172C17: got 'Abastecimiento'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40173 / R40173C17: got 'Abastecimiento'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40174 / R40174C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40175 / R40175C17: got 'Presupuesto'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40176 / R40176C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40177 / R40177C17: got 'Diagnósticos, informes,
reportes, opiniones técnicas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40178 / R40178C17: got 'Diagnósticos, informes,
reportes, opiniones técnicas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40179 / R40179C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40180 / R40180C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40181 / R40181C17: got 'Presupuesto'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40182 / R40182C17: got 'Abastecimiento'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40183 / R40183C17: got 'Abastecimiento'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40184 / R40184C17: got 'Abastecimiento'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40185 / R40185C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40186 / R40186C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40187 / R40187C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40188 / R40188C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40189 / R40189C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40190 / R40190C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40191 / R40191C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40192 / R40192C17: got 'Diagnósticos, informes,
reportes, opiniones técnicas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40193 / R40193C17: got 'Abastecimiento'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40194 / R40194C17: got 'Mantenimiento y
rehabilitación'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40195 / R40195C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40196 / R40196C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40197 / R40197C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40198 / R40198C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40199 / R40199C17: got 'Abastecimiento'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40200 / R40200C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40201 / R40201C17: got 'Mantenimiento y
rehabilitación'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40202 / R40202C17: got 'Abastecimiento'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40203 / R40203C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40204 / R40204C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40205 / R40205C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40206 / R40206C17: got 'Mantenimiento y
rehabilitación'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40207 / R40207C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40208 / R40208C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40209 / R40209C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40210 / R40210C17: got 'Abastecimiento'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40211 / R40211C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40212 / R40212C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40213 / R40213C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40214 / R40214C17: got 'Pipas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40215 / R40215C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40216 / R40216C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40217 / R40217C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40218 / R40218C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40219 / R40219C17: got 'Mantenimiento y
rehabilitación'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40220 / R40220C17: got 'Presupuesto'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40221 / R40221C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40222 / R40222C17: got 'Abastecimiento'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40223 / R40223C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40224 / R40224C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40225 / R40225C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40226 / R40226C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40227 / R40227C17: got 'Abastecimiento'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40228 / R40228C17: got 'Diagnósticos, informes,
reportes, opiniones técnicas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40229 / R40229C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40230 / R40230C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40231 / R40231C17: got 'Abastecimiento'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40232 / R40232C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40233 / R40233C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40234 / R40234C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40235 / R40235C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40236 / R40236C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40237 / R40237C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40238 / R40238C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40239 / R40239C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40240 / R40240C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40241 / R40241C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40242 / R40242C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40243 / R40243C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40244 / R40244C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40245 / R40245C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40246 / R40246C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40247 / R40247C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40248 / R40248C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40249 / R40249C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40250 / R40250C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40251 / R40251C17: got 'Abastecimiento'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40252 / R40252C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40253 / R40253C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40254 / R40254C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40255 / R40255C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40256 / R40256C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40257 / R40257C17: got 'Mantenimiento y
rehabilitación'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40258 / R40258C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40259 / R40259C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40260 / R40260C17: got 'Pago de derechos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40261 / R40261C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40262 / R40262C17: got 'Mantenimiento y
rehabilitación'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40263 / R40263C17: got 'Diagnósticos, informes,
reportes, opiniones técnicas'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40264 / R40264C17: got 'Permisos y contratos'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40265 / R40265C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40266 / R40266C17: got 'Infraestructura y obras'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40267 / R40267C17: got 'Abastecimiento'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40268 / R40268C17: got 'Mantenimiento y
rehabilitación'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40269 / R40269C17: got 'Mantenimiento y
rehabilitación'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expecting logical in Q40270 / R40270C17: got 'Mantenimiento y
rehabilitación'</code></pre>
</div>
</div>
<p>El código de arriba es solo un preprocesamiento/limpieza de la última base de datos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb336"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb336-1"><a href="#cb336-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb336-2"><a href="#cb336-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(dependencia) <span class="sc">%&gt;%</span></span>
<span id="cb336-3"><a href="#cb336-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(<span class="at">sort =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb336-4"><a href="#cb336-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb336-5"><a href="#cb336-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb336-6"><a href="#cb336-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb336-7"><a href="#cb336-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">dependencia =</span> <span class="fu">str_replace</span>(</span>
<span id="cb336-8"><a href="#cb336-8" aria-hidden="true" tabindex="-1"></a>            dependencia, <span class="st">"Secretaría de Desarrollo Urbano y Vivienda"</span>,</span>
<span id="cb336-9"><a href="#cb336-9" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Secretaría de Desarrollo</span><span class="sc">\n</span><span class="st">Urbano y Vivienda"</span></span>
<span id="cb336-10"><a href="#cb336-10" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb336-11"><a href="#cb336-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">dependencia =</span> <span class="fu">str_replace</span>(</span>
<span id="cb336-12"><a href="#cb336-12" aria-hidden="true" tabindex="-1"></a>            dependencia, <span class="st">"Secretaría de Obras y Servicios"</span>,</span>
<span id="cb336-13"><a href="#cb336-13" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Secretaría de Obras</span><span class="sc">\n</span><span class="st">y Servicios"</span></span>
<span id="cb336-14"><a href="#cb336-14" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb336-15"><a href="#cb336-15" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb336-16"><a href="#cb336-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(dependencia, n), <span class="at">y =</span> n, <span class="at">fill =</span> <span class="st">"pink"</span>)) <span class="sc">+</span></span>
<span id="cb336-17"><a href="#cb336-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb336-18"><a href="#cb336-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">comma</span>(n), <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb336-19"><a href="#cb336-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="fl">0.9</span>),</span>
<span id="cb336-20"><a href="#cb336-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">10</span></span>
<span id="cb336-21"><a href="#cb336-21" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb336-22"><a href="#cb336-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb336-23"><a href="#cb336-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb336-24"><a href="#cb336-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb336-25"><a href="#cb336-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb336-26"><a href="#cb336-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">25</span>)</span>
<span id="cb336-27"><a href="#cb336-27" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb336-28"><a href="#cb336-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb336-29"><a href="#cb336-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">"Instituciones con más de 1,000 SIP"</span>,</span>
<span id="cb336-30"><a href="#cb336-30" aria-hidden="true" tabindex="-1"></a>        <span class="co">#     subtitle = "",</span></span>
<span id="cb336-31"><a href="#cb336-31" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">""</span></span>
<span id="cb336-32"><a href="#cb336-32" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Era evidente que al tratarse de un tema sobre agua en la Ciudad de México, la institución con mayor número de solicitudes al respecto iba a ser el Sistema de Aguas (SACMEX pa lxs cuates). Sin embargo, también es interesante ver que hay 7 alcaldías (antes delegaciones).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb337"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb337-1"><a href="#cb337-1" aria-hidden="true" tabindex="-1"></a>aniomes <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb337-2"><a href="#cb337-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(anio) <span class="sc">%&gt;%</span></span>
<span id="cb337-3"><a href="#cb337-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>() <span class="sc">%&gt;%</span></span>
<span id="cb337-4"><a href="#cb337-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>()</span>
<span id="cb337-5"><a href="#cb337-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb337-6"><a href="#cb337-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(aniomes, <span class="fu">aes</span>(<span class="at">x =</span> anio, <span class="at">y =</span> n)) <span class="sc">+</span></span>
<span id="cb337-7"><a href="#cb337-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb337-8"><a href="#cb337-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb337-9"><a href="#cb337-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">comma</span>(n), <span class="at">vjust =</span> <span class="sc">-</span>.<span class="dv">7</span>),</span>
<span id="cb337-10"><a href="#cb337-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="dv">1</span>),</span>
<span id="cb337-11"><a href="#cb337-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">8</span></span>
<span id="cb337-12"><a href="#cb337-12" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb337-13"><a href="#cb337-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb337-14"><a href="#cb337-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">25</span>)) <span class="sc">+</span></span>
<span id="cb337-15"><a href="#cb337-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">2006</span>, <span class="dv">2022</span>, <span class="at">by =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb337-16"><a href="#cb337-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb337-17"><a href="#cb337-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">"Solicitudes por año"</span>,</span>
<span id="cb337-18"><a href="#cb337-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">""</span></span>
<span id="cb337-19"><a href="#cb337-19" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Si vemos el número de solicitudes a lo largo del tiempo, en 2017 se registró el mayor número de solicitudes. En la siguiente gráfica, interactiva, se puede observar la desagregación por mes de cada año. Esto porque creo que hay un efecto de estacionalidad: es decir, si bien un año puede ser particularmente seco, como este 2024, pudo haber meses en los que el desabasto fue mayor.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb338"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb338-1"><a href="#cb338-1" aria-hidden="true" tabindex="-1"></a>xmes <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb338-2"><a href="#cb338-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">mes =</span> <span class="fu">month</span>(fecha_de_ingreso)) <span class="sc">%&gt;%</span></span>
<span id="cb338-3"><a href="#cb338-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(anio, mes) <span class="sc">%&gt;%</span></span>
<span id="cb338-4"><a href="#cb338-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>() <span class="sc">%&gt;%</span></span>
<span id="cb338-5"><a href="#cb338-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb338-6"><a href="#cb338-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb338-7"><a href="#cb338-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">grupo =</span> <span class="fu">as.Date</span>(<span class="fu">paste</span>(anio, mes, <span class="st">"01"</span>, <span class="at">sep =</span> <span class="st">"-"</span>))</span>
<span id="cb338-8"><a href="#cb338-8" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb338-9"><a href="#cb338-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> grupo, <span class="at">y =</span> n)) <span class="sc">+</span></span>
<span id="cb338-10"><a href="#cb338-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb338-11"><a href="#cb338-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb338-12"><a href="#cb338-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_date</span>(<span class="cn">NULL</span>,</span>
<span id="cb338-13"><a href="#cb338-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">breaks =</span> <span class="fu">breaks_width</span>(<span class="st">"1 year"</span>),</span>
<span id="cb338-14"><a href="#cb338-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">labels =</span> <span class="fu">label_date</span>(<span class="st">"%Y"</span>)</span>
<span id="cb338-15"><a href="#cb338-15" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb338-16"><a href="#cb338-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1500</span>, <span class="at">by =</span> <span class="dv">100</span>)) <span class="sc">+</span></span>
<span id="cb338-17"><a href="#cb338-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb338-18"><a href="#cb338-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb338-19"><a href="#cb338-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="fl">0.9</span>),</span>
<span id="cb338-20"><a href="#cb338-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">35</span>)</span>
<span id="cb338-21"><a href="#cb338-21" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb338-22"><a href="#cb338-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb338-23"><a href="#cb338-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">"SIP por mes y año"</span>,</span>
<span id="cb338-24"><a href="#cb338-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">""</span></span>
<span id="cb338-25"><a href="#cb338-25" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb338-26"><a href="#cb338-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb338-27"><a href="#cb338-27" aria-hidden="true" tabindex="-1"></a>plotly<span class="sc">::</span><span class="fu">ggplotly</span>(xmes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-ab80430bfffaf313da20" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-ab80430bfffaf313da20">{"x":{"data":[{"x":[13422,13453,13483,13514,13545,13573,13604,13634,13665,13695,13726,13757,13787,13818,13848,13879,13910,13939,13970,14000,14031,14061,14092,14123,14153,14184,14214,14245,14276,14304,14335,14365,14396,14426,14457,14488,14518,14549,14579,14610,14641,14669,14700,14730,14761,14791,14822,14853,14883,14914,14944,14975,15006,15034,15065,15095,15126,15156,15187,15218,15248,15279,15309,15340,15371,15400,15431,15461,15492,15522,15553,15584,15614,15645,15675,15706,15737,15765,15796,15826,15857,15887,15918,15949,15979,16010,16040,16071,16102,16130,16161,16191,16222,16252,16283,16314,16344,16375,16405,16436,16467,16495,16526,16556,16587,16617,16648,16679,16709,16740,16770,16801,16832,16861,16892,16922,16953,16983,17014,17045,17075,17106,17136,17167,17198,17226,17257,17287,17318,17348,17379,17410,17440,17471,17501,17532,17563,17591,17622,17652,17683,17713,17744,17775,17805,17836,17866,17897,17928,17956,17987,18017,18048,18078,18109,18140,18170,18201,18231,18262,18293,18322,18353,18383,18414,18444,18475,18506,18536,18567,18597,18628,18659,18687,18718,18748,18779,18809,18840,18871,18901,18932,18962,18993,19024,19052,19083,19113,19144,19174,19205,19236,19266,19297,19327],"y":[1,21,9,16,80,18,16,18,20,24,23,37,34,23,19,65,41,40,26,77,36,51,33,48,53,39,646,56,148,871,89,75,179,481,377,201,1190,225,70,194,195,252,162,86,219,241,152,462,202,179,192,114,137,219,70,270,146,98,121,176,140,206,373,242,245,217,63,202,143,125,101,155,111,164,44,86,190,70,104,127,161,133,108,57,238,126,138,198,111,243,347,137,212,109,147,112,358,285,202,263,262,260,188,137,205,151,225,192,160,255,116,173,346,251,298,319,225,215,151,278,199,181,87,120,363,259,358,427,250,516,862,690,523,340,219,392,345,229,668,323,258,328,378,262,551,167,118,218,243,239,328,246,222,196,178,175,387,217,272,235,364,181,106,102,104,159,246,125,371,216,104,114,164,202,207,311,241,174,215,174,127,148,74,110,198,251,168,150,232,439,209,332,353,352,114],"text":["grupo: 2006-10-01<br />n:    1","grupo: 2006-11-01<br />n:   21","grupo: 2006-12-01<br />n:    9","grupo: 2007-01-01<br />n:   16","grupo: 2007-02-01<br />n:   80","grupo: 2007-03-01<br />n:   18","grupo: 2007-04-01<br />n:   16","grupo: 2007-05-01<br />n:   18","grupo: 2007-06-01<br />n:   20","grupo: 2007-07-01<br />n:   24","grupo: 2007-08-01<br />n:   23","grupo: 2007-09-01<br />n:   37","grupo: 2007-10-01<br />n:   34","grupo: 2007-11-01<br />n:   23","grupo: 2007-12-01<br />n:   19","grupo: 2008-01-01<br />n:   65","grupo: 2008-02-01<br />n:   41","grupo: 2008-03-01<br />n:   40","grupo: 2008-04-01<br />n:   26","grupo: 2008-05-01<br />n:   77","grupo: 2008-06-01<br />n:   36","grupo: 2008-07-01<br />n:   51","grupo: 2008-08-01<br />n:   33","grupo: 2008-09-01<br />n:   48","grupo: 2008-10-01<br />n:   53","grupo: 2008-11-01<br />n:   39","grupo: 2008-12-01<br />n:  646","grupo: 2009-01-01<br />n:   56","grupo: 2009-02-01<br />n:  148","grupo: 2009-03-01<br />n:  871","grupo: 2009-04-01<br />n:   89","grupo: 2009-05-01<br />n:   75","grupo: 2009-06-01<br />n:  179","grupo: 2009-07-01<br />n:  481","grupo: 2009-08-01<br />n:  377","grupo: 2009-09-01<br />n:  201","grupo: 2009-10-01<br />n: 1190","grupo: 2009-11-01<br />n:  225","grupo: 2009-12-01<br />n:   70","grupo: 2010-01-01<br />n:  194","grupo: 2010-02-01<br />n:  195","grupo: 2010-03-01<br />n:  252","grupo: 2010-04-01<br />n:  162","grupo: 2010-05-01<br />n:   86","grupo: 2010-06-01<br />n:  219","grupo: 2010-07-01<br />n:  241","grupo: 2010-08-01<br />n:  152","grupo: 2010-09-01<br />n:  462","grupo: 2010-10-01<br />n:  202","grupo: 2010-11-01<br />n:  179","grupo: 2010-12-01<br />n:  192","grupo: 2011-01-01<br />n:  114","grupo: 2011-02-01<br />n:  137","grupo: 2011-03-01<br />n:  219","grupo: 2011-04-01<br />n:   70","grupo: 2011-05-01<br />n:  270","grupo: 2011-06-01<br />n:  146","grupo: 2011-07-01<br />n:   98","grupo: 2011-08-01<br />n:  121","grupo: 2011-09-01<br />n:  176","grupo: 2011-10-01<br />n:  140","grupo: 2011-11-01<br />n:  206","grupo: 2011-12-01<br />n:  373","grupo: 2012-01-01<br />n:  242","grupo: 2012-02-01<br />n:  245","grupo: 2012-03-01<br />n:  217","grupo: 2012-04-01<br />n:   63","grupo: 2012-05-01<br />n:  202","grupo: 2012-06-01<br />n:  143","grupo: 2012-07-01<br />n:  125","grupo: 2012-08-01<br />n:  101","grupo: 2012-09-01<br />n:  155","grupo: 2012-10-01<br />n:  111","grupo: 2012-11-01<br />n:  164","grupo: 2012-12-01<br />n:   44","grupo: 2013-01-01<br />n:   86","grupo: 2013-02-01<br />n:  190","grupo: 2013-03-01<br />n:   70","grupo: 2013-04-01<br />n:  104","grupo: 2013-05-01<br />n:  127","grupo: 2013-06-01<br />n:  161","grupo: 2013-07-01<br />n:  133","grupo: 2013-08-01<br />n:  108","grupo: 2013-09-01<br />n:   57","grupo: 2013-10-01<br />n:  238","grupo: 2013-11-01<br />n:  126","grupo: 2013-12-01<br />n:  138","grupo: 2014-01-01<br />n:  198","grupo: 2014-02-01<br />n:  111","grupo: 2014-03-01<br />n:  243","grupo: 2014-04-01<br />n:  347","grupo: 2014-05-01<br />n:  137","grupo: 2014-06-01<br />n:  212","grupo: 2014-07-01<br />n:  109","grupo: 2014-08-01<br />n:  147","grupo: 2014-09-01<br />n:  112","grupo: 2014-10-01<br />n:  358","grupo: 2014-11-01<br />n:  285","grupo: 2014-12-01<br />n:  202","grupo: 2015-01-01<br />n:  263","grupo: 2015-02-01<br />n:  262","grupo: 2015-03-01<br />n:  260","grupo: 2015-04-01<br />n:  188","grupo: 2015-05-01<br />n:  137","grupo: 2015-06-01<br />n:  205","grupo: 2015-07-01<br />n:  151","grupo: 2015-08-01<br />n:  225","grupo: 2015-09-01<br />n:  192","grupo: 2015-10-01<br />n:  160","grupo: 2015-11-01<br />n:  255","grupo: 2015-12-01<br />n:  116","grupo: 2016-01-01<br />n:  173","grupo: 2016-02-01<br />n:  346","grupo: 2016-03-01<br />n:  251","grupo: 2016-04-01<br />n:  298","grupo: 2016-05-01<br />n:  319","grupo: 2016-06-01<br />n:  225","grupo: 2016-07-01<br />n:  215","grupo: 2016-08-01<br />n:  151","grupo: 2016-09-01<br />n:  278","grupo: 2016-10-01<br />n:  199","grupo: 2016-11-01<br />n:  181","grupo: 2016-12-01<br />n:   87","grupo: 2017-01-01<br />n:  120","grupo: 2017-02-01<br />n:  363","grupo: 2017-03-01<br />n:  259","grupo: 2017-04-01<br />n:  358","grupo: 2017-05-01<br />n:  427","grupo: 2017-06-01<br />n:  250","grupo: 2017-07-01<br />n:  516","grupo: 2017-08-01<br />n:  862","grupo: 2017-09-01<br />n:  690","grupo: 2017-10-01<br />n:  523","grupo: 2017-11-01<br />n:  340","grupo: 2017-12-01<br />n:  219","grupo: 2018-01-01<br />n:  392","grupo: 2018-02-01<br />n:  345","grupo: 2018-03-01<br />n:  229","grupo: 2018-04-01<br />n:  668","grupo: 2018-05-01<br />n:  323","grupo: 2018-06-01<br />n:  258","grupo: 2018-07-01<br />n:  328","grupo: 2018-08-01<br />n:  378","grupo: 2018-09-01<br />n:  262","grupo: 2018-10-01<br />n:  551","grupo: 2018-11-01<br />n:  167","grupo: 2018-12-01<br />n:  118","grupo: 2019-01-01<br />n:  218","grupo: 2019-02-01<br />n:  243","grupo: 2019-03-01<br />n:  239","grupo: 2019-04-01<br />n:  328","grupo: 2019-05-01<br />n:  246","grupo: 2019-06-01<br />n:  222","grupo: 2019-07-01<br />n:  196","grupo: 2019-08-01<br />n:  178","grupo: 2019-09-01<br />n:  175","grupo: 2019-10-01<br />n:  387","grupo: 2019-11-01<br />n:  217","grupo: 2019-12-01<br />n:  272","grupo: 2020-01-01<br />n:  235","grupo: 2020-02-01<br />n:  364","grupo: 2020-03-01<br />n:  181","grupo: 2020-04-01<br />n:  106","grupo: 2020-05-01<br />n:  102","grupo: 2020-06-01<br />n:  104","grupo: 2020-07-01<br />n:  159","grupo: 2020-08-01<br />n:  246","grupo: 2020-09-01<br />n:  125","grupo: 2020-10-01<br />n:  371","grupo: 2020-11-01<br />n:  216","grupo: 2020-12-01<br />n:  104","grupo: 2021-01-01<br />n:  114","grupo: 2021-02-01<br />n:  164","grupo: 2021-03-01<br />n:  202","grupo: 2021-04-01<br />n:  207","grupo: 2021-05-01<br />n:  311","grupo: 2021-06-01<br />n:  241","grupo: 2021-07-01<br />n:  174","grupo: 2021-08-01<br />n:  215","grupo: 2021-09-01<br />n:  174","grupo: 2021-10-01<br />n:  127","grupo: 2021-11-01<br />n:  148","grupo: 2021-12-01<br />n:   74","grupo: 2022-01-01<br />n:  110","grupo: 2022-02-01<br />n:  198","grupo: 2022-03-01<br />n:  251","grupo: 2022-04-01<br />n:  168","grupo: 2022-05-01<br />n:  150","grupo: 2022-06-01<br />n:  232","grupo: 2022-07-01<br />n:  439","grupo: 2022-08-01<br />n:  209","grupo: 2022-09-01<br />n:  332","grupo: 2022-10-01<br />n:  353","grupo: 2022-11-01<br />n:  352","grupo: 2022-12-01<br />n:  114"],"type":"scatter","mode":"lines+markers","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)"}},"frame":null}],"layout":{"margin":{"t":82.019095060191,"r":7.30593607305936,"b":57.5712530783046,"l":85.3466168534662},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":46.4923204649232},"title":{"text":"SIP por mes y año","font":{"color":"rgba(0,0,0,1)","family":"","size":55.7907845579079},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[13126.75,19622.25],"tickmode":"array","ticktext":["2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021","2022","2023"],"tickvals":[13149,13514,13879,14245,14610,14975,15340,15706,16071,16436,16801,17167,17532,17897,18262,18628,18993,19358],"categoryorder":"array","categoryarray":["2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021","2022","2023"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":37.1938563719386},"tickangle":-45,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":46.4923204649232}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-58.45,1249.45],"tickmode":"array","ticktext":["0","100","200","300","400","500","600","700","800","900","1000","1100","1200"],"tickvals":[7.105427357601e-15,100,200,300,400,500,600,700,800,900,1000,1100,1200],"categoryorder":"array","categoryarray":["0","100","200","300","400","500","600","700","800","900","1000","1100","1200"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":37.1938563719386},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":46.4923204649232}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":37.1938563719386}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"4af066974626":{"x":{},"y":{},"type":"scatter"},"4af02ebe554d":{"x":{},"y":{}}},"cur_data":"4af066974626","visdat":{"4af066974626":["function (y) ","x"],"4af02ebe554d":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>De las nueve categorías la que tuvo mayor número de solicitudes fue la de “pago de derechos”, seguida de “permisos y contratos” y “abastecimiento”. Las cifras varían con las del reporte porque se clasificó sin filtrar las solicitudes de la muestra.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb339"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb339-1"><a href="#cb339-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> forcats<span class="sc">::</span><span class="fu">fct_infreq</span>(<span class="fu">as.factor</span>(etiqueta)))) <span class="sc">+</span></span>
<span id="cb339-2"><a href="#cb339-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">fill =</span> organo_de_gobierno)) <span class="sc">+</span></span>
<span id="cb339-3"><a href="#cb339-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">comma</span>(<span class="fu">after_stat</span>(count))),</span>
<span id="cb339-4"><a href="#cb339-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">stat =</span> <span class="st">"count"</span>,</span>
<span id="cb339-5"><a href="#cb339-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>,</span>
<span id="cb339-6"><a href="#cb339-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="fl">0.9</span>),</span>
<span id="cb339-7"><a href="#cb339-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">10</span></span>
<span id="cb339-8"><a href="#cb339-8" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb339-9"><a href="#cb339-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb339-10"><a href="#cb339-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb339-11"><a href="#cb339-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb339-12"><a href="#cb339-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">25</span>)</span>
<span id="cb339-13"><a href="#cb339-13" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb339-14"><a href="#cb339-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb339-15"><a href="#cb339-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb339-16"><a href="#cb339-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">""</span>,</span>
<span id="cb339-17"><a href="#cb339-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> <span class="st">""</span>,</span>
<span id="cb339-18"><a href="#cb339-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">"Ámbito y grupos"</span></span>
<span id="cb339-19"><a href="#cb339-19" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb340"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb340-1"><a href="#cb340-1" aria-hidden="true" tabindex="-1"></a>d1 <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb340-2"><a href="#cb340-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb340-3"><a href="#cb340-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">estatus =</span> <span class="fu">case_when</span>(</span>
<span id="cb340-4"><a href="#cb340-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">str_detect</span>(estatus, <span class="fu">regex</span>(<span class="st">"desechada"</span>, <span class="at">ignore_case =</span> T)) <span class="sc">~</span> <span class="st">"Desechada"</span>,</span>
<span id="cb340-5"><a href="#cb340-5" aria-hidden="true" tabindex="-1"></a>            T <span class="sc">~</span> estatus</span>
<span id="cb340-6"><a href="#cb340-6" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb340-7"><a href="#cb340-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">estatus =</span> <span class="fu">case_when</span>(</span>
<span id="cb340-8"><a href="#cb340-8" aria-hidden="true" tabindex="-1"></a>            <span class="fu">str_detect</span>(estatus, <span class="fu">regex</span>(<span class="st">"proceso|pendiente|espera"</span>, <span class="at">ignore_case =</span> T)) <span class="sc">~</span> <span class="st">"En proceso"</span>,</span>
<span id="cb340-9"><a href="#cb340-9" aria-hidden="true" tabindex="-1"></a>            T <span class="sc">~</span> estatus</span>
<span id="cb340-10"><a href="#cb340-10" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb340-11"><a href="#cb340-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb340-12"><a href="#cb340-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb340-13"><a href="#cb340-13" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(d1, <span class="fu">aes</span>(<span class="at">x =</span> forcats<span class="sc">::</span><span class="fu">fct_infreq</span>(etiqueta))) <span class="sc">+</span></span>
<span id="cb340-14"><a href="#cb340-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">fill =</span> estatus)) <span class="sc">+</span></span>
<span id="cb340-15"><a href="#cb340-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">comma</span>(<span class="fu">after_stat</span>(count))),</span>
<span id="cb340-16"><a href="#cb340-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">stat =</span> <span class="st">"count"</span>,</span>
<span id="cb340-17"><a href="#cb340-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>,</span>
<span id="cb340-18"><a href="#cb340-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="fl">0.9</span>),</span>
<span id="cb340-19"><a href="#cb340-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">10</span></span>
<span id="cb340-20"><a href="#cb340-20" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb340-21"><a href="#cb340-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb340-22"><a href="#cb340-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb340-23"><a href="#cb340-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb340-24"><a href="#cb340-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">25</span>)</span>
<span id="cb340-25"><a href="#cb340-25" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb340-26"><a href="#cb340-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb340-27"><a href="#cb340-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb340-28"><a href="#cb340-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">""</span>,</span>
<span id="cb340-29"><a href="#cb340-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> <span class="st">"Estatus"</span>,</span>
<span id="cb340-30"><a href="#cb340-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">"Estatus"</span></span>
<span id="cb340-31"><a href="#cb340-31" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Por último, se observa que practicamente todas las solicitudes fueron respondidas, o estaban en proceso de. Sin embargo, esto no significa que las respuestas sean <em>útiles</em> para las personas. O bien, que respondan de manera satisfactoria de acuerdo a las personas solicitantes.</p>
</section>
<section id="y-qué-más" class="level2">
<h2 class="anchored" data-anchor-id="y-qué-más">¿Y qué más?</h2>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>